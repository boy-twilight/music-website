import{m as e,z as o,A as a}from"../element-plus/element-plus.70abbed3.js";import{G as s,ax as l,u as t,o as n,M as r,O as i,S as c,T as d,ay as p,az as u,a as g,d as m,i as h,e as f,R as v,U as w,a2 as b,I as C,c as S,P as y,V as M,z as k,aq as x}from"../@vue/@vue.7ad02ad1.js";import{u as I,a as _,_ as z,A as j,a2 as H,j as L,a3 as A,z as B,a4 as D,h as P}from"../../static/index-a903482c.js";import{s as T}from"../pinia/pinia.07d51cb2.js";import{o as q}from"../vue-router/vue-router.53ff932e.js";const G=(e=>(p("data-v-2c076053"),e=e(),u(),e))((()=>g("span",{class:"iconfont"},"",-1))),R=z(s({__name:"index",props:{songs:null,name:{default:"播放全部"}},setup(o){l((e=>({"7080c4a0":t(s),"26a79085":t(a)})));const{boxShadow:a,themeColor:s}=I(),{playAllMusic:p}=_();return(a,l)=>{const u=e;return n(),r(u,{onClick:l[0]||(l[0]=e=>t(p)(o.songs)),color:t(s)},{default:i((()=>[G,c(d(o.name),1)])),_:1},8,["color"])}}}),[["__scopeId","data-v-2c076053"]]),$=["onMousedown","textContent"],E={key:0,class:"iconfont vip"},O=["onClick"],U=["onClick"],V=["onClick"],F=s({__name:"index",props:{songs:null,songIdMapper:null,height:null,showSelect:{type:Boolean},sort:{default:void 0},isCancelSort:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},pageSize:{default:0}},setup(e,{expose:s}){const p=e;l((e=>({"5a37d780":t(G),"7c0543a2":t(K),f0e06a7c:t(R),"44f5d434":t(F),"13b116a4":t(J)})));const u=j(),{bgMode:z}=T(u),{fontColor:G,background:R,fontGray:F,themeColor:J,tableHover:K}=I(),N=k("hideScroll"),Q=H(),{songList:W,current:X,isPlay:Y}=T(Q),Z=L(),ee=m(),oe=h((()=>p.showSelect)),ae=h((()=>p.showSelect?55:0)),se=()=>{ee.value.clearSelection()};f(oe,(e=>{e||se()}));const le=h((()=>p.sort?p.sort:[!1,!1,!1,!1])),te=h((()=>p.isCancelSort)),ne=(e,o)=>e.name.localeCompare(o.name),re=(e,o)=>e.singer.localeCompare(o.singer),ie=(e,o)=>e.album.localeCompare(o.album),ce=(e,o)=>+e.time-+o.time;f(te,(e=>{e&&ee.value.clearSort()}));const de=()=>document.querySelectorAll(`.operation${p.showHeader}`),pe=e=>{let o=0;if(p.pageSize>0){const a=Math.floor(p.songIdMapper.get(e.id)/p.pageSize);o=p.songIdMapper.get(e.id)-a*p.pageSize}else o=p.songIdMapper.get(e.id);const a=de()[o];a&&(a.style.opacity="1")},ue=e=>{let o=0;if(p.pageSize>0){const a=Math.floor(p.songIdMapper.get(e.id)/p.pageSize);o=p.songIdMapper.get(e.id)-a*p.pageSize}else o=p.songIdMapper.get(e.id);const a=de()[o];a&&(a.style.opacity="0")},{playMusic:ge}=_();let me=0,he=!1;const fe=()=>{if(he)return he=!1,clearTimeout(me);me=setTimeout((()=>{if(p.songs.length>0){const e=p.songs.findIndex((e=>e.id==W.value[X.value].id));P(p.songs,e)}fe()}),3e5)};return fe(),q((()=>{he=!0})),s({clearSelect:se,getSelectItems:()=>{var e;return null==(e=ee.value)?void 0:e.getSelectionRows()}}),(s,l)=>{const p=a,u=x("prevent");return n(),r(t(o),{onCellDblclick:t(ge),onCellMouseEnter:pe,onCellMouseLeave:ue,data:e.songs,"max-height":e.height,"show-header":e.showHeader,ref_key:"tableContainer",ref:ee,style:{width:"80vw"},class:C(["songs-table",{"skin-table":"skin"==t(z)}])},{default:i((()=>[t(oe)?(n(),r(p,{key:0,type:"selection",width:t(ae)},null,8,["width"])):v("",!0),w(p,{sortable:t(le)[0],"sort-method":ne,label:"歌曲",width:500-t(ae)},{default:i((o=>[g("div",null,[g("span",{onMousedown:b((e=>t(Z).addLove(o.row,t(Z).loveSongs,t(Z).loveMusicId)),["prevent"]),class:C(["iconfont love",{"is-love":o.row.isLove}]),textContent:d(o.row.isLove?"󰅅":"")},null,42,$),g("span",null,d(o.row.name),1),"1"==o.row.available||"10"==o.row.available?(n(),S("span",E,"")):v("",!0),y((n(),S("span",{class:"iconfont playmv",onClick:e=>{return a=o.row,void D(a,(()=>{N()}));var a}},[c("")],8,O)),[[u]]),g("div",{class:C(`operation-area operation${e.showHeader}`)},[y((n(),S("span",{onClick:e=>t(ge)(o.row),class:"iconfont"},[c("")],8,U)),[[M,!t(Y)||t(X)!=t(W).findIndex((e=>e.id==o.row.id))],[u]]),y((n(),S("span",{onClick:l[0]||(l[0]=e=>Y.value=!1),class:"iconfont"},[c(" ")])),[[M,t(Y)&&t(X)==t(W).findIndex((e=>e.id==o.row.id))],[u]]),y((n(),S("span",{class:"iconfont",onClick:e=>t(Z).addMuiscDownload(o.row)},[c("󰌄")],8,V)),[[u]]),w(t(A),{song:o.row,play:t(ge)},null,8,["song","play"])],2)])])),_:1},8,["sortable","width"]),w(p,{sortable:t(le)[1],"sort-method":re,prop:"singer",label:"歌手",width:"320"},null,8,["sortable"]),w(p,{sortable:t(le)[2],"sort-method":ie,prop:"album",label:"专辑",width:"320"},null,8,["sortable"]),w(p,{sortable:t(le)[3],"sort-method":ce,label:"时长"},{default:i((e=>[g("span",null,d(t(B)(e.row.time)),1)])),_:1},8,["sortable"])])),_:1},8,["onCellDblclick","data","max-height","show-header","class"])}}});export{R as P,F as _};
