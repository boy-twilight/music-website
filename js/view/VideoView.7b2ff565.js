import{z as e}from"../element-plus/element-plus.79622da4.js";import{G as a,ax as s,Z as l,d as t,i,P as o,c as n,U as u,u as r,a as c,S as v,V as p,o as d,ay as m,az as h,z as _,n as y}from"../@vue/@vue.7ad02ad1.js";import{u as j,d as f,m as x,h as g,_ as w}from"../../static/index-00c07d3e.js";/* empty css                                                                                                                     */import{A as b}from"../index/index.8e8a57d9.js";import{B as C}from"../index/index.e3d59e22.js";import{S as z}from"../index/index.89b6bda7.js";import{L as E}from"../index/index.a0e338b1.js";/* empty css                                                                                                                     */import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../vue-router/vue-router.53ff932e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";const R=e=>(m("data-v-73766b5e"),e=e(),h(),e),S=["infinite-scroll-disabled"],V=R((()=>c("h4",{class:"title video-choice"},"视频类型",-1))),k=R((()=>c("h4",{class:"title all"},"全部视频",-1))),G=R((()=>c("span",{class:"iconfont"},"",-1))),I=w(a({__name:"VideoView",setup(a){s((e=>({a1a785f2:r(m),a1c6c4ba:r(w),"68c1383f":r(I),"38cbcf7e":r(h),ba373672:r(R),"76f3d233":r(A)})));const{fontColor:m,boxShadow:h,fontBlack:w,themeColor:R,fontGray:I,contentHeight:A}=j(),N=l(["全部","韩国","日本","欧美","港台","内地"]),O=l(["全部","官方版","现场版","网易出品"]),U=l(["上升最快","最新","最热"]),B=t(0),L=t(0),M=t(0),P=l(new Map),H=l(new Map);let T=l([]),Z=l([]);const q=t(600),D=t(30),F=t(!1),J=t(!1),K=_("firstLoading"),Q=t(!1),W=i((()=>Z.filter((e=>e.name.includes(X.value)||e.artist.includes(X.value))))),X=t(""),Y=async(e,a)=>{H.set(B.value+""+L.value+M.value,q.value),T.splice(0),Z.splice(0),"视频地区"==a?B.value=e:"视频来源"==a?L.value=e:M.value=e,D.value=40;const s=H.get(B.value+""+L.value+M.value);q.value=s||600,await y();const l=P.get(B.value+""+L.value+M.value);l?(T.push(...l),Z.push(...l.slice(0,D.value))):ae()},$=()=>{X.value||(F.value=!0,D.value+=10,D.value<T.length?setTimeout((()=>{Z.push(...T.slice(Z.length,D.value)),F.value=!1}),100):q.value==T.length?(q.value*=2,Q.value=!0):(Z.push(...T.slice(Z.length)),x(g.SUCCESS,"已经到达底部！")))},ee=async()=>{Q.value=!1,J.value=!0;try{const e=await f(q.value,N[B.value],O[L.value],U[M.value]),{data:a}=e;a.slice(T.length).forEach((e=>{const{id:a,name:s,cover:l,playCount:t,artistName:i}=e;T.push({id:a,name:s,image:l,playCount:t,artist:i})})),P.set(B.value+""+L.value+M.value,[...T]),Z.push(...T.slice(Z.length,D.value))}catch(e){x(g.ERROR,e.message)}J.value=!1,F.value=!1},ae=async()=>{K.value=!0;try{const e=await f(q.value,N[B.value],O[L.value],U[M.value]),{data:a}=e;a.forEach((e=>{const{id:a,name:s,cover:l,playCount:t,artistName:i}=e;T.push({id:a,name:s,image:l,playCount:t,artist:i})})),P.set(B.value+""+L.value+M.value,[...T]),Z.push(...T.slice(0,D.value))}catch(e){x(g.ERROR,e.message)}K.value=!1};return ae(),(a,s)=>{const l=e;return o((d(),n("div",{class:"rvideo-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":F.value,style:{overflow:"scroll"}},[u(r(z),{modelValue:X.value,"onUpdate:modelValue":s[0]||(s[0]=e=>X.value=e)},null,8,["modelValue"]),V,u(r(C),{onGetActiveIndex:Y,title:"视频地区","cur-index":0,"show-title":!1,type:N,class:"area"},null,8,["type"]),u(r(C),{onGetActiveIndex:Y,title:"视频来源","cur-index":0,"show-title":!1,type:O},null,8,["type"]),u(r(C),{onGetActiveIndex:Y,title:"视频排序","show-title":!1,"cur-index":0,type:U},null,8,["type"]),k,u(r(b),{mvs:r(W)},null,8,["mvs"]),u(r(E),{"is-loading":J.value},null,8,["is-loading"]),o(c("button",{class:"more-video",onClick:ee},[v(" 更多精彩视频"),G],512),[[p,Q.value]])],8,S)),[[l,$]])}}}),[["__scopeId","data-v-73766b5e"]]);export{I as default};
