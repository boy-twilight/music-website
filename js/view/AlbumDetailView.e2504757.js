import{h as s,x as e}from"../element-plus/element-plus.d1c0be0b.js";import{G as a,ax as i,Z as l,i as o,r as n,c as t,P as r,V as p,U as m,u,a as c,T as d,M as v,R as _,O as f,z as h,o as j,S as g}from"../@vue/@vue.59fec093.js";import{b}from"../vue-router/vue-router.10a7fca4.js";import{g as y,a as x,b as w,R as T,X as k,w as A,h as I,i as L,j as z,k as R,C,s as E,_ as M}from"../../static/index-9031b76e.js";import{M as O}from"../index/index.6fcb193c.js";import{P,_ as S}from"../index.vue_vue_type_style_index_0_scoped_775b3144_lang/index.vue_vue_type_style_index_0_scoped_775b3144_lang.3091d25e.js";import{O as U}from"../index/index.c590d526.js";import{A as q}from"../index/index.de9c42f8.js";/* empty css                                                                                                                     */import{T as D}from"../index/index.a35437cd.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.57559ed5.js";const G={class:"album-detail-container scroll-container"},V={class:"header"},B={class:"right"},F={class:"artist"},J={class:"header-operation"},X={class:"content"},Z={class:"info"},H={class:"desc"},K=M(a({__name:"AlbumDetailView",setup(a){i((s=>({"35ae7fae":u(M),"359ee04a":u(K),"8163dbb6":u(N),a1aef690:u(Q)})));const M=y().get("fontColor"),K=y().get("fontBlack"),N=y().get("shadow"),Q=h("fontGray"),W=x(),Y=b(),$=Y.query.id+"",ss=Y.query.artistId+"",es=l({id:$,artistId:ss,name:"",cover:"",artist:"",publishTime:""}),as=l([]),is=l([]),ls=o((()=>new Map(is.map(((s,e)=>[s.id,e]))))),os=h("firstLoading"),ns=n(!1),ts=s=>{ns.value=s},rs=s=>{ns.value=s},ps=()=>{E("我有一个精品专辑分享给你："+es.name+"，地址：https://www.liyinchao.cloud"+Y.fullPath)};return w((async()=>{try{(await Promise.all([T(ss),k($)])).forEach(((s,e)=>{if(0==e){const{hotAlbums:e}=s;for(let s of e){const{id:e}=s;if(e!=$&&as.length<=5){const{picUrl:a,name:i,publishTime:l}=s;as.push({name:i,id:e,cover:a,publishTime:A(l),artistId:ss+""})}else if(as.length>5)break}}else if(1==e){const{album:{picUrl:e,artist:a,publishTime:i,name:l,company:o,description:n},songs:t}=s;es.name=l,es.cover=e,es.publishTime=A(i),es.artist=a.name,es.company=o,es.description=n,W.initLoveStatus(es,W.loveAlbumId),t.forEach((s=>{I(is,s)})),W.initLoveMusic(is),L(is)}}))}catch(s){z(R.ERROR,s.message)}os.value=!1}),os),(a,i)=>{const l=s,o=e;return j(),t("div",G,[r(m(u(U),{songs:is,"song-id-mapper":u(ls),onCloseSelect:ts},null,8,["songs","song-id-mapper"]),[[p,ns.value]]),r(c("div",V,[m(l,{src:es.cover,loading:"lazy",class:"left"},null,8,["src"]),c("div",B,[c("h4",null,d(es.name),1),c("p",F,d(es.artist),1),c("p",null,d(es.publishTime),1),c("div",J,[m(u(P),{songs:is},null,8,["songs"]),m(u(C),{name:es.isLove?"取消收藏":"收藏",icon:es.isLove?"":"","icon-style":es.isLove?"color:#ff6a6a;":"",onClick:i[0]||(i[0]=s=>u(W).addLove(es,u(W).loveAlbum,u(W).loveAlbumId))},null,8,["name","icon","icon-style"]),ns.value?_("",!0):(j(),v(u(O),{key:0,"share-to":ps,onOpenSelect:rs}))])])],512),[[p,!ns.value]]),r(c("div",X,[m(u(D),{active:"songs"},{content:f((()=>[m(o,{label:"歌曲",name:"songs"},{default:f((()=>[m(u(S),{songs:is,"song-id-mapper":u(ls)},null,8,["songs","song-id-mapper"]),m(u(q),{albums:as,title:"该歌手的其它专辑"},null,8,["albums"])])),_:1}),m(o,{label:"详情",name:"album"},{default:f((()=>[c("div",Z,[c("p",null,[g(" 专辑："),c("span",null,d(es.name),1)]),c("p",null,[g(" 歌手："),c("span",null,d(es.artist),1)]),c("p",null,[g(" 唱片公司："),c("span",null,d(es.company),1)]),c("p",null,[g(" 发布时间："),c("span",null,d(es.publishTime),1)]),c("p",null,[g(" 专辑简介："),c("span",H,d(es.description),1)])])])),_:1})])),_:1})],512),[[p,!ns.value]])])}}}),[["__scopeId","data-v-9fc6468f"]]);export{K as default};
