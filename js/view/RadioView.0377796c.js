import{h as e,z as a}from"../element-plus/element-plus.79622da4.js";import{G as s,ax as i,Z as t,d as o,P as l,c as r,a as n,F as p,a7 as c,U as d,u as m,o as u,M as v,ay as _,az as j,z as y}from"../@vue/@vue.7ad02ad1.js";import{u as h}from"../vue-router/vue-router.53ff932e.js";import{u as f,X as g,Y as x,m as k,h as w,Z as C,_ as b}from"../../static/index-00c07d3e.js";/* empty css                                                                                                                     */import{A as z}from"../index/index.99fcc62c.js";import{L as E}from"../index/index.a0e338b1.js";/* empty css                                                                                                                     */import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";const R=["infinite-scroll-disabled"],S=(e=>(_("data-v-7caba25a"),e=e(),j(),e))((()=>n("h4",{class:"r-title"},"精彩推荐",-1))),U={class:"banner"},I=b(s({__name:"RadioView",setup(s){i((e=>({"3c5e5eaa":m(_),"58313e34":m(j),"260a74e0":m(b)})));const{boxShadow:_,fontColor:j,contentHeight:b}=f(),I=h(),L=t([]),P=t([]),Z=t([]),q=o(0),A=y("firstLoading"),D=o(!1),F=o(!1),G=async()=>{const e=await C(P[q.value].id),{djRadios:a}=e;Z.push([]),a.forEach((e=>{const{picUrl:a,name:s,id:i,playCount:t}=e;Z[q.value].push({name:s,id:i,image:a,playCount:t,creator:{nickname:"",avatarUrl:""},tag:[],description:""})})),D.value=!1,F.value=!1},H=()=>{D.value=!0,F.value=!0,q.value++,q.value<P.length?setTimeout((()=>{G()}),1e3):(F.value=!1,k(w.SUCCESS,"已经到达底部！"))};return(async()=>{A.value=!0;try{(await Promise.all([g(),x()])).forEach(((e,a)=>{if(0==a){const{data:a}=e;a.forEach((e=>{const{targetId:a,pic:s}=e;L.push({id:a,pic:s})}))}else if(1==a){const{categories:a}=e;a.forEach((e=>{const{id:a,name:s}=e;P.push({id:a,name:s})}))}}))}catch(e){k(w.ERROR,e.message)}await G(),A.value=!1})(),(s,i)=>{const t=e,o=a;return l((u(),r("div",{class:"radio-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":D.value,style:{overflow:"scroll"}},[S,n("div",U,[(u(!0),r(p,null,c(L,(e=>(u(),v(t,{key:e.id,src:e.pic,onClick:a=>{return s=e.id,void I.push({name:"playlist",query:{id:s,type:"radio"}});var s}},null,8,["src","onClick"])))),128))]),(u(!0),r(p,null,c(Z,((e,a)=>(u(),r("div",{class:"radio",key:P[a].id},[d(m(z),{title:P[a].name,playlists:e,type:"radio"},null,8,["title","playlists"])])))),128)),d(m(E),{"is-loading":F.value},null,8,["is-loading"])],8,R)),[[o,H]])}}}),[["__scopeId","data-v-7caba25a"]]);export{I as default};
