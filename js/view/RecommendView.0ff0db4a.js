import{u as s,w as a,g as e}from"../element-plus/element-plus.f4dce189.js";import{G as t,ax as i,M as l,O as o,o as n,c as r,a7 as c,a as p,F as u,Z as m,U as d,u as v,z as g,T as h,ay as f,az as y,n as j}from"../@vue/@vue.59fec093.js";import{s as _}from"../pinia/pinia.81428a33.js";import{_ as R,g as x,u as k,a as b,b as w,c as C,e as I,d as z,f as E,h as O,i as U,j as A,k as F}from"../../assets/index-831d6614.js";/* empty css                                                                                                                     */import{A as L}from"../index/index.2d322a4f.js";import{A as N}from"../index/index.25798000.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../vue-router/vue-router.10a7fca4.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const B=["src"],G=R(t({__name:"Carousel",props:{pictures:null,type:null,height:null,position:null},setup:e=>(i((s=>({"3fd6ab84":e.height}))),(t,i)=>{const m=a,d=s;return n(),l(d,{height:e.height,type:e.type,"indicator-position":e.position,class:"carousel"},{default:o((()=>[(n(!0),r(u,null,c(e.pictures,(s=>(n(),l(m,{key:s},{default:o((()=>[p("img",{src:s.pic},null,8,B)])),_:2},1024)))),128))])),_:1},8,["height","type","indicator-position"])})}),[["__scopeId","data-v-c5b6c16c"]]),M=s=>(f("data-v-453f3f07"),s=s(),y(),s),P={class:"main-container"},T={class:"musiclist"},V=M((()=>p("h4",{class:"title"},"推荐新音乐",-1))),Z={class:"content"},q=["onClick"],D=[M((()=>p("span",{class:"iconfont"},"",-1)))],H={class:"right"},J=R(t({__name:"RecommendView",setup(s){i((s=>({"0fe397a0":v(a),"1002d668":v(t),fca472b2:v(l),"7b9f37f6":v(f),"764152be":v(o)})));const a=x().get("fontColor"),t=x().get("fontBlack"),l=x().get("shadow"),o=x().get("themeColor"),f=g("fontGray"),y=k(),{songList:R,current:B,isPlay:M,playProcess:J,playTime:K,songListId:Q}=_(y),S=b(),W=m([]),X=m([]),Y=m([]),$=m([]),ss=g("firstLoading");return w((async()=>{try{const s=await C(),{banners:a}=s;a.forEach((s=>{const{imageUrl:a,targetId:e}=s;W.push({id:e,pic:a})}))}catch(s){I(z.ERROR,s.message)}try{const s=await E(10),{playlists:a}=s;a.forEach((s=>{if(X.length<10){const{name:a,id:e,coverImgUrl:t,playCount:i,description:l,tags:o,creator:n}=s;X.push({name:a,id:e,playCount:i,description:l,image:t,tag:o,creator:{avatarUrl:n.avatarUrl,nickname:n.nickname}})}}))}catch(s){I(z.ERROR,s.message)}try{const s=await O(40),{data:{list:a}}=s,e=[];for(let t of a){const{fee:s}=t.data;if(!(Y.length<10))break;"0"!=s&&"8"!=s||U(e,Y,t.data)}A(e.join(","),Y)}catch(s){I(z.ERROR,s.message)}try{const s=await F(10,"内地","全部","最新"),{data:a}=s;a.forEach((s=>{const{id:a,name:e,cover:t,playCount:i,artistName:l}=s;$.push({id:a,name:e,image:t,playCount:i,artist:l})}))}catch(s){I(z.ERROR,s.message)}ss.value=!1}),ss),(s,a)=>{const t=e;return n(),r("div",P,[d(G,{pictures:W.slice(0,5),type:"card",height:"230px"},null,8,["pictures"]),d(v(L),{title:"你的歌单补给站",playlists:X},null,8,["playlists"]),p("div",T,[V,p("div",Z,[(n(!0),r(u,null,c(Y,(s=>(n(),r("div",{key:s.id,class:"song-recommend"},[p("div",{onClick:a=>(async s=>{if("0"==s.available||"8"==s.available){const a=Q.value.get(s.id);null==a?(S.addRecord(s,S.songRecord,S.loveMusicId),0==B.value?(M&&(M.value=!1),J.value=0,K.value=0,R.value.unshift(s),await j(),M.value=!0):(R.value.unshift(s),B.value=0)):B.value!=a?B.value=a:M.value=!0}else"1"==s.available?I(z.INFO,"此歌曲为vip专属"):"10"==s.available&&I(z.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")})(s),class:"mask"},D,8,q),d(t,{src:s.songImage,loading:"lazy",class:"left"},null,8,["src"]),p("div",H,[p("p",null,h(s.name),1),p("p",null,h(s.singer),1)])])))),128))])]),d(v(N),{title:"最新mv",mvs:$,class:"mv-list"},null,8,["mvs"])])}}}),[["__scopeId","data-v-453f3f07"]]);export{J as default};
