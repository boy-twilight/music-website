import{h as s,x as e}from"../element-plus/element-plus.70abbed3.js";import{G as a,ax as o,Z as i,i as l,d as n,c as t,P as r,V as p,U as m,u,a as c,T as d,M as v,R as _,O as f,o as j,S as h,z as g}from"../@vue/@vue.7ad02ad1.js";import{b as y}from"../vue-router/vue-router.53ff932e.js";import{u as b,j as x,g as w,R as T,X as L,v as k,f as z,h as A,m as I,i as C,C as R,s as S,_ as M}from"../../static/index-6eb5ac45.js";import{M as O}from"../index/index.75d8f1e1.js";import{P,_ as E}from"../index.vue_vue_type_style_index_0_scoped_841f6d57_lang/index.vue_vue_type_style_index_0_scoped_841f6d57_lang.35f50a6b.js";import{O as G}from"../index/index.4294d82e.js";import{A as U}from"../index/index.8168b193.js";/* empty css                                                                                                                     */import{T as q}from"../index/index.9b028512.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";const V={class:"album-detail-container scroll-container"},B={class:"header"},D={class:"right"},F={class:"artist"},H={class:"header-operation"},K={class:"content"},X={class:"info"},Z={class:"desc"},J=M(a({__name:"AlbumDetailView",setup(a){o((s=>({"22c07b1c":u(M),"22b0dbb8":u(J),a73fe4da:u(N),"715b38ec":u(Q)})));const{fontColor:M,fontBlack:J,boxShadow:N,fontGray:Q}=b(),W=x(),Y=y(),$=Y.query.id+"",ss=Y.query.artistId+"",es=i({id:$,artistId:ss,name:"",cover:"",artist:"",publishTime:""}),as=i([]),os=i([]),is=l((()=>new Map(os.map(((s,e)=>[s.id,e]))))),ls=g("firstLoading"),ns=n(!1),ts=s=>{ns.value=s},rs=s=>{ns.value=s},ps=()=>{S("我有一个精品专辑分享给你："+es.name+"，地址：https://www.liyinchao.cloud"+Y.fullPath)};return w((async()=>{try{(await Promise.all([T(ss),L($)])).forEach(((s,e)=>{if(0==e){const{hotAlbums:e}=s;for(let s of e){const{id:e}=s;if(e!=$&&as.length<=5){const{picUrl:a,name:o,publishTime:i}=s;as.push({name:o,id:e,cover:a,publishTime:k(i),artistId:ss+""})}else if(as.length>5)break}}else if(1==e){const{album:{picUrl:e,artist:a,publishTime:o,name:i,company:l,description:n},songs:t}=s;es.name=i,es.cover=e,es.publishTime=k(o),es.artist=a.name,es.company=l,es.description=n,W.initLoveStatus(es,W.loveAlbumId),t.forEach((s=>{z(os,s)})),W.initLoveMusic(os),A(os)}}))}catch(s){I(C.ERROR,s.message)}ls.value=!1}),ls),(a,o)=>{const i=s,l=e;return j(),t("div",V,[r(m(u(G),{songs:os,"song-id-mapper":u(is),onCloseSelect:rs},null,8,["songs","song-id-mapper"]),[[p,ns.value]]),r(c("div",B,[m(i,{src:es.cover,loading:"lazy",class:"left"},null,8,["src"]),c("div",D,[c("h4",null,d(es.name),1),c("p",F,d(es.artist),1),c("p",null,d(es.publishTime),1),c("div",H,[m(u(P),{songs:os},null,8,["songs"]),m(u(R),{name:es.isLove?"取消收藏":"收藏",icon:es.isLove?"":"","icon-style":es.isLove?"color:#ff6a6a;":"",onClick:o[0]||(o[0]=s=>u(W).addLove(es,u(W).loveAlbum,u(W).loveAlbumId))},null,8,["name","icon","icon-style"]),ns.value?_("",!0):(j(),v(u(O),{key:0,"share-to":ps,onOpenSelect:ts}))])])],512),[[p,!ns.value]]),r(c("div",K,[m(u(q),{active:"songs"},{content:f((()=>[m(l,{label:"歌曲",name:"songs"},{default:f((()=>[m(u(E),{songs:os,"song-id-mapper":u(is)},null,8,["songs","song-id-mapper"]),m(u(U),{albums:as,title:"该歌手的其它专辑"},null,8,["albums"])])),_:1}),m(l,{label:"详情",name:"album"},{default:f((()=>[c("div",X,[c("p",null,[h(" 专辑："),c("span",null,d(es.name),1)]),c("p",null,[h(" 歌手："),c("span",null,d(es.artist),1)]),c("p",null,[h(" 唱片公司："),c("span",null,d(es.company),1)]),c("p",null,[h(" 发布时间："),c("span",null,d(es.publishTime),1)]),c("p",null,[h(" 专辑简介："),c("span",Z,d(es.description),1)])])])),_:1})])),_:1})],512),[[p,!ns.value]])])}}}),[["__scopeId","data-v-59c30839"]]);export{J as default};
