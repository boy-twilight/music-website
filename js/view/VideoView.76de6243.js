import{y as e}from"../element-plus/element-plus.70abbed3.js";import{G as a,ax as s,Z as t,d as l,i,P as o,c as n,U as u,u as r,a as v,S as c,V as p,z as m,o as d,ay as h,az as y,n as _}from"../@vue/@vue.7ad02ad1.js";import{g as j,e as f,m as g,i as x,_ as w}from"../../static/index-c54fb4ae.js";/* empty css                                                                                                                     */import{A as b}from"../index/index.3ab33549.js";import{B as C}from"../index/index.fcca8914.js";import{S}from"../index/index.6e0300dc.js";import{L as z}from"../index/index.7682c408.js";/* empty css                                                                                                                     */import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../vue-router/vue-router.53ff932e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";const E=e=>(h("data-v-830a2ef3"),e=e(),y(),e),G=["infinite-scroll-disabled"],R=E((()=>v("h4",{class:"title video-choice"},"视频类型",-1))),V=E((()=>v("h4",{class:"title all"},"全部视频",-1))),k=E((()=>v("span",{class:"iconfont"},"",-1))),A=w(a({__name:"VideoView",setup(a){s((e=>({bce3f41c:r(h),bd0332e4:r(w),cc45b418:r(A),"2b2d9869":r(y),"06888d88":r(E)})));const{fontColor:h,boxShadow:y,fontBlack:w,themeColor:E,fontGray:A}=m("theme"),N=m("hideScrollbar"),O=t(["全部","韩国","日本","欧美","港台","内地"]),B=t(["全部","官方版","现场版","网易出品"]),I=t(["上升最快","最新","最热"]),L=l(0),M=l(0),P=l(0),U=t(new Map),T=t(new Map);let Z=t([]),q=t([]);const D=l(600),F=l(30),H=l(!1),J=l(!1),K=m("firstLoading"),Q=l(!1),W=i((()=>q.filter((e=>e.name.includes(X.value)||e.artist.includes(X.value))))),X=l(""),Y=e=>{X.value=e},$=async(e,a)=>{T.set(L.value+""+M.value+P.value,D.value),N(),Z.splice(0),q.splice(0),"视频地区"==a?L.value=e:"视频来源"==a?M.value=e:P.value=e,F.value=40;const s=T.get(L.value+""+M.value+P.value);D.value=s||1500,await _();const t=U.get(L.value+""+M.value+P.value);t?(Z.push(...t),q.push(...t.slice(0,F.value))):se()},ee=()=>{X.value||(H.value=!0,F.value+=10,F.value<Z.length?setTimeout((()=>{q.push(...Z.slice(q.length,F.value)),H.value=!1}),100):D.value==Z.length?(D.value*=2,Q.value=!0):(q.push(...Z.slice(q.length)),g(x.SUCCESS,"已经到达底部！")))},ae=()=>{Q.value=!1,j((async()=>{try{const e=await f(D.value,O[L.value],B[M.value],I[P.value]),{data:a}=e;a.slice(Z.length).forEach((e=>{const{id:a,name:s,cover:t,playCount:l,artistName:i}=e;Z.push({id:a,name:s,image:t,playCount:l,artist:i})})),U.set(L.value+""+M.value+P.value,[...Z]),q.push(...Z.slice(q.length,F.value))}catch(e){g(x.ERROR,e.message)}J.value=!1,H.value=!1}),J)},se=()=>{j((async()=>{try{const e=await f(D.value,O[L.value],B[M.value],I[P.value]),{data:a}=e;a.forEach((e=>{const{id:a,name:s,cover:t,playCount:l,artistName:i}=e;Z.push({id:a,name:s,image:t,playCount:l,artist:i})})),U.set(L.value+""+M.value+P.value,[...Z]),q.push(...Z.slice(0,F.value))}catch(e){g(x.ERROR,e.message)}K.value=!1}),K)};return se(),(a,s)=>{const t=e;return o((d(),n("div",{class:"rvideo-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":H.value,style:{overflow:"auto"}},[u(r(S),{onGetContent:Y}),R,u(r(C),{onGetActive:$,title:"视频地区",activeValue:0,"show-title":!1,type:O,class:"area"},null,8,["type"]),u(r(C),{onGetActive:$,title:"视频来源",activeValue:0,"show-title":!1,type:B},null,8,["type"]),u(r(C),{onGetActive:$,title:"视频排序","show-title":!1,activeValue:0,type:I},null,8,["type"]),V,u(r(b),{mvs:r(W)},null,8,["mvs"]),u(r(z),{"is-loading":J.value},null,8,["is-loading"]),o(v("button",{class:"more-video",onClick:ae},[c(" 更多精彩视频"),k],512),[[p,Q.value]])],8,G)),[[t,ee]])}}}),[["__scopeId","data-v-830a2ef3"]]);export{A as default};
