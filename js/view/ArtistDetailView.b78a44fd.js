import{x as e,y as a}from"../element-plus/element-plus.79622da4.js";import{G as s,ax as t,Z as i,d as l,i as o,M as n,O as r,u,o as c,a as m,P as d,V as p,U as v,T as g,c as _,R as h,a7 as f,F as y,z as j,ay as x,az as b}from"../@vue/@vue.7ad02ad1.js";import{b as w}from"../vue-router/vue-router.53ff932e.js";import{u as L,i as R,O as z,Q as E,R as k,t as O,e as S,f as C,m as P,h as U,C as A,P as I,s as T,T as D,y as G,U as M,V as N,_ as V}from"../../static/index-00c07d3e.js";import{M as q}from"../index/index.acb2d14b.js";import{P as B,_ as F}from"../index.vue_vue_type_style_index_0_scoped_f0a13ca2_lang/index.vue_vue_type_style_index_0_scoped_f0a13ca2_lang.ae5cbee5.js";import{A as H}from"../index/index.f10bc782.js";/* empty css                                                                                                                     */import{A as J}from"../index/index.8e8a57d9.js";import{O as K}from"../index/index.28836372.js";import{L as Q}from"../index/index.a0e338b1.js";import{N as Z}from"../index/index.99d18942.js";import{T as W}from"../index/index.6af32fa3.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";/* empty css                                                                                                                     */const X={class:"artist-detail-container scroll-container"},Y={class:"header"},$=["src"],ee={class:"right"},ae={class:"name"},se={class:"info"},te={key:0},ie=(e=>(x("data-v-a2111a4f"),e=e(),b(),e))((()=>m("p",{class:"job"},"职业：歌手、词曲创作者",-1))),le={class:"fans"},oe={class:"header-operation"},ne={class:"content"},re={class:"detail"},ue={class:"desc"},ce=V(s({__name:"ArtistDetailView",setup(s){t((e=>({"3423562b":u(x),"3413b6c7":u(b),"01b06a9b":u(me),"847a2ebc":u(V),"865f1fba":u(ce)})));const{fontColor:x,fontBlack:b,boxShadow:V,themeColor:ce,fontGray:me,contentHeight:de}=L(),pe=R(),ve=w(),ge=ve.query.id+"",_e=ve.query.score+"",he=i({name:"",score:_e,id:ge,avatar:"",alias:[]}),fe=i([]),ye=i([]),je=l(1),xe=l(z),be=o((()=>ye.length)),we=o((()=>ye.slice((je.value-1)*xe.value,je.value*xe.value))),Le=i([]),Re=i([]),ze=l(!1),Ee=j("firstLoading"),ke=i(new Map([["album",!0],["mv",!0]])),Oe=l(!1),Se=l(),Ce=()=>{T("我有一个宝藏歌手推荐给你："+he.name+"，地址：https://www.liyinchao.cloud"+ve.fullPath)},Pe=async e=>{if("album"==e){if(0!=Re.length)return;ze.value=!0;try{const e=await D(ge),{hotAlbums:a}=e;a.forEach((e=>{const{picUrl:a,name:s,publishTime:t}=e;Re.push({name:s,id:e.id,cover:a,publishTime:G(t),artistId:ge+""})}))}catch(a){P(U.ERROR,a.message)}ke.set("album",0==Re.length)}else if("mv"==e){if(0!=Le.length)return;ze.value=!0;try{const e=await M(ge),{mvs:a}=e;a.forEach((e=>{const{id:a,name:s,artistName:t,imgurl16v9:i,playCount:l}=e;Le.push({id:a,name:s,artist:t,image:i,playCount:l})}))}catch(a){P(U.ERROR,a.message)}ke.set("mv",0==Le.length)}else if("detail"==e){if(0!=fe.length)return;ze.value=!0;try{const e=await N(ge),{introduction:a}=e;a.forEach((e=>{fe.push({title:e.ti,content:e.txt})}))}catch(a){P(U.ERROR,a.message)}}ze.value=!1};return(async()=>{Ee.value=!0;try{(await Promise.all([E(ge),k(ge,1e3)])).forEach((async(e,a)=>{if(0==a){const{artist:a}=e,{name:s,alias:t,picUrl:i,briefDesc:l}=a;he.name=s,he.alias=t,he.avatar=i,he.briefDesc=l,pe.initLoveStatus(he,pe.loveSingerId)}else if(1==a){const{songs:a}=e,s=a.map((e=>e.id)).join(","),t=await O(s),{songs:i}=t;i.forEach((e=>{S(ye,e)})),pe.initLoveMusic(ye),C(ye)}}))}catch(e){P(U.ERROR,e.message)}Ee.value=!1})(),(s,t)=>{const i=a,l=e;return c(),n(l,{"max-height":u(de)},{default:r((()=>{var e,a;return[m("div",X,[d(v(u(K),{"show-select":Oe.value,"onUpdate:showSelect":t[0]||(t[0]=e=>Oe.value=e),songs:u(we),ref_key:"batch",ref:Se},null,8,["show-select","songs"]),[[p,Oe.value]]),d(m("div",Y,[m("img",{src:he.avatar,class:"left"},null,8,$),m("div",ee,[m("h4",ae,g(he.name),1),m("div",se,[0!=(null==(e=he.alias)?void 0:e.length)?(c(),_("p",te," 英文名："+g(null==(a=he.alias)?void 0:a.join("、")),1)):h("",!0),ie]),m("span",le,"粉丝数："+g(he.score),1),m("div",oe,[v(u(B),{songs:u(we)},null,8,["songs"]),v(u(A),{name:he.isLove?"取消关注":"关注",icon:he.isLove?"":"","icon-style":he.isLove?"color:#ff6a6a;":"",onClick:t[1]||(t[1]=e=>u(pe).addLove(he,u(pe).loveSinger,u(pe).loveSingerId))},null,8,["name","icon","icon-style"]),Oe.value?h("",!0):(c(),n(u(q),{key:0,"share-to":Ce,onOpenSelect:t[2]||(t[2]=e=>{var a;return null==(a=Se.value)?void 0:a.openSelectBox()})}))])])],512),[[p,!Oe.value]]),d(m("div",ne,[v(u(W),{active:"hot",onGetActive:Pe},{content:r((()=>[v(i,{label:"精选",name:"hot"},{default:r((()=>[v(u(F),{songs:u(we),"page-size":xe.value},null,8,["songs","page-size"]),d(v(u(I),{"cur-page":je.value,"onUpdate:curPage":t[3]||(t[3]=e=>je.value=e),"page-size":xe.value,total:u(be)},null,8,["cur-page","page-size","total"]),[[p,xe.value<u(be)]])])),_:1}),v(i,{label:"专辑",name:"album"},{default:r((()=>[d(v(u(Z),{text:"歌手暂无专辑",size:280},null,512),[[p,ke.get("album")]]),v(u(Q),{isLoading:ze.value},null,8,["isLoading"]),d(v(u(H),{albums:Re,"show-pagination":!0},null,8,["albums"]),[[p,!ke.get("album")]])])),_:1}),v(i,{label:"视频",name:"mv"},{default:r((()=>[d(v(u(Z),{text:"歌手暂无视频",size:280},null,512),[[p,ke.get("mv")]]),v(u(Q),{isLoading:ze.value},null,8,["isLoading"]),d(v(u(J),{mvs:Le,"show-pagination":!0},null,8,["mvs"]),[[p,!ke.get("mv")]])])),_:1}),v(i,{label:"详情",name:"detail"},{default:r((()=>[v(u(Q),{isLoading:ze.value},null,8,["isLoading"]),m("div",re,[m("p",ue,g(he.briefDesc),1),(c(!0),_(y,null,f(fe,(e=>d((c(),_("div",{key:e.title},[m("h4",null,g(e.title),1),m("p",null,g(e.content),1)])),[[p,fe.length>0]]))),128))])])),_:1})])),_:1})],512),[[p,!Oe.value]])])]})),_:1},8,["max-height"])}}}),[["__scopeId","data-v-a2111a4f"]]);export{ce as default};
