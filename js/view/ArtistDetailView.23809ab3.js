import{x as e,y as a}from"../element-plus/element-plus.79622da4.js";import{G as s,ax as t,Z as i,d as l,i as o,M as n,O as r,u,o as c,a as m,P as d,V as p,U as v,T as g,c as _,R as h,a7 as f,F as y,z as j,ay as x,az as b}from"../@vue/@vue.7ad02ad1.js";import{b as w}from"../vue-router/vue-router.53ff932e.js";import{u as L,h as z,O as R,U as E,V as k,v as S,e as O,f as C,m as P,M as U,s as A,C as I,P as M,q as D,W as G,z as T,X as q,Y as N,r as V,_ as B}from"../../static/index-b302a22d.js";import{M as F}from"../index/index.4f4557e0.js";import{P as H,_ as J}from"../index.vue_vue_type_style_index_0_scoped_b3813f91_lang/index.vue_vue_type_style_index_0_scoped_b3813f91_lang.b69fb170.js";import{A as K}from"../index/index.13ac99bc.js";/* empty css                                                                                                                     */import{A as W}from"../index/index.256316ad.js";import{O as X}from"../index/index.08c04c55.js";import{L as Y}from"../index/index.7204bff6.js";import{N as Z}from"../index/index.37793095.js";import{T as Q}from"../index/index.c4315259.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";/* empty css                                                                                                                     */const $={class:"artist-detail-container scroll-container"},ee={class:"header"},ae=["src"],se={class:"right"},te={class:"name"},ie={class:"info"},le={key:0},oe=(e=>(x("data-v-aca9b41a"),e=e(),b(),e))((()=>m("p",{class:"job"},"职业：歌手、词曲创作者",-1))),ne={class:"fans"},re={class:"header-operation"},ue={class:"content"},ce={class:"detail"},me={class:"desc"},de=B(s({__name:"ArtistDetailView",setup(s){t((e=>({"11dde622":u(x),"11ce46be":u(b),e60f0078:u(pe),c9050ece:u(B),d33041e8:u(de)})));const{fontColor:x,fontBlack:b,boxShadow:B,themeColor:de,fontGray:pe,contentHeight:ve}=L(),ge=z(),_e=w(),he=_e.query.id+"",fe=_e.query.score+"",ye=i({name:"",score:fe,id:he,avatar:"",alias:[]}),je=i([]),xe=i([]),be=l(1),we=l(R),Le=o((()=>xe.length)),ze=o((()=>xe.slice((be.value-1)*we.value,be.value*we.value))),Re=i([]),Ee=i([]),ke=l(!1),Se=j("firstLoading"),Oe=i(new Map([["album",!0],["mv",!0]])),Ce=l(!1),Pe=l(),Ue=()=>{D("我有一个宝藏歌手推荐给你："+ye.name+"，地址：https://www.liyinchao.cloud"+_e.fullPath)},Ae=async e=>{if("album"==e){if(0!=Ee.length)return;ke.value=!0;try{const e=await G(he),{hotAlbums:a}=e;a.forEach((e=>{const{picUrl:a,name:s,publishTime:t}=e;Ee.push({name:s,id:e.id,cover:a,publishTime:T(t),artistId:he+""})}))}catch(a){P(U.ERROR,a.message)}Oe.set("album",0==Ee.length)}else if("mv"==e){if(0!=Re.length)return;ke.value=!0;try{const e=await q(he),{mvs:a}=e;a.forEach((e=>{const{id:a,name:s,artistName:t,imgurl16v9:i,playCount:l}=e;Re.push({id:a,name:s,artist:t,image:i,playCount:l})}))}catch(a){P(U.ERROR,a.message)}Oe.set("mv",0==Re.length)}else if("detail"==e){if(0!=je.length)return;ke.value=!0;try{const e=await N(he),{introduction:a}=e;a.forEach((e=>{je.push({title:e.ti,content:e.txt})}))}catch(a){P(U.ERROR,a.message)}}ke.value=!1};return(async()=>{Se.value=!0;try{(await Promise.all([E(he),k(he,1e3)])).forEach((async(e,a)=>{if(0==a){const{artist:a}=e,{name:s,alias:t,picUrl:i,briefDesc:l}=a;ye.name=s,ye.alias=t,ye.avatar=i,ye.briefDesc=l,ge.initLoveStatus(ye,ge.loveSingerId)}else if(1==a){const{songs:a}=e,s=a.map((e=>e.id)).join(","),t=await S(s),{songs:i}=t;i.forEach((e=>{O(xe,e)})),ge.initLoveMusic(xe),C(xe)}}))}catch(e){P(U.ERROR,e.message)}await A(V),Se.value=!1})(),(s,t)=>{const i=a,l=e;return c(),n(l,{"max-height":u(ve)},{default:r((()=>{var e,a;return[m("div",$,[d(v(u(X),{"show-select":Ce.value,"onUpdate:showSelect":t[0]||(t[0]=e=>Ce.value=e),songs:u(ze),ref_key:"batch",ref:Pe},null,8,["show-select","songs"]),[[p,Ce.value]]),d(m("div",ee,[m("img",{src:ye.avatar,class:"left"},null,8,ae),m("div",se,[m("h4",te,g(ye.name),1),m("div",ie,[0!=(null==(e=ye.alias)?void 0:e.length)?(c(),_("p",le," 英文名："+g(null==(a=ye.alias)?void 0:a.join("、")),1)):h("",!0),oe]),m("span",ne,"粉丝数："+g(ye.score),1),m("div",re,[v(u(H),{songs:u(ze)},null,8,["songs"]),v(u(I),{name:ye.isLove?"取消关注":"关注",icon:ye.isLove?"":"","icon-style":ye.isLove?"color:#ff6a6a;":"",onClick:t[1]||(t[1]=e=>u(ge).addLove(ye,u(ge).loveSinger,u(ge).loveSingerId))},null,8,["name","icon","icon-style"]),Ce.value?h("",!0):(c(),n(u(F),{key:0,onShare:Ue,onOpenSelect:t[2]||(t[2]=e=>{var a;return null==(a=Pe.value)?void 0:a.openSelectBox()})}))])])],512),[[p,!Ce.value]]),d(m("div",ue,[v(u(Q),{active:"hot",onGetActive:Ae},{content:r((()=>[v(i,{label:"精选",name:"hot"},{default:r((()=>[v(u(J),{songs:u(ze),"page-size":we.value},null,8,["songs","page-size"]),d(v(u(M),{"cur-page":be.value,"onUpdate:curPage":t[3]||(t[3]=e=>be.value=e),"page-size":we.value,total:u(Le)},null,8,["cur-page","page-size","total"]),[[p,we.value<u(Le)]])])),_:1}),v(i,{label:"专辑",name:"album"},{default:r((()=>[d(v(u(Z),{text:"歌手暂无专辑",size:280},null,512),[[p,Oe.get("album")]]),v(u(Y),{isLoading:ke.value},null,8,["isLoading"]),d(v(u(K),{albums:Ee,"show-pagination":!0},null,8,["albums"]),[[p,!Oe.get("album")]])])),_:1}),v(i,{label:"视频",name:"mv"},{default:r((()=>[d(v(u(Z),{text:"歌手暂无视频",size:280},null,512),[[p,Oe.get("mv")]]),v(u(Y),{isLoading:ke.value},null,8,["isLoading"]),d(v(u(W),{mvs:Re,"show-pagination":!0},null,8,["mvs"]),[[p,!Oe.get("mv")]])])),_:1}),v(i,{label:"详情",name:"detail"},{default:r((()=>[v(u(Y),{isLoading:ke.value},null,8,["isLoading"]),m("div",ce,[m("p",me,g(ye.briefDesc),1),(c(!0),_(y,null,f(je,(e=>d((c(),_("div",{key:e.title},[m("h4",null,g(e.title),1),m("p",null,g(e.content),1)])),[[p,je.length>0]]))),128))])])),_:1})])),_:1})],512),[[p,!Ce.value]])])]})),_:1},8,["max-height"])}}}),[["__scopeId","data-v-aca9b41a"]]);export{de as default};
