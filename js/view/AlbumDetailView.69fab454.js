import{j as s,x as e}from"../element-plus/element-plus.85c7c360.js";import{G as a,ax as i,Z as o,i as l,r as n,c as t,P as r,V as p,U as m,u,a as c,T as d,M as v,R as _,O as j,z as g,o as f,S as h}from"../@vue/@vue.59fec093.js";import{b as y}from"../vue-router/vue-router.10a7fca4.js";import{g as b,a as x,b as w,R as T,w as R,e as k,d as A,X as I,i as L,j as z,C as O,s as C,_ as E}from"../../assets/index-0f5abafb.js";import{M}from"../index/index.bab4f92c.js";import{P as S,_ as P}from"../index.vue_vue_type_style_index_0_scoped_2dc764e5_lang/index.vue_vue_type_style_index_0_scoped_2dc764e5_lang.afaeebcd.js";import{O as U}from"../index/index.fe0f1d5e.js";import{A as q}from"../index/index.f1c91bdf.js";/* empty css                                                                                                                     */import{T as D}from"../index/index.7e48a06b.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const G={class:"album-detail-container scroll-container"},V={class:"header"},B={class:"right"},F={class:"artist"},J={class:"header-operation"},X={class:"content"},Z={class:"info"},H={class:"desc"},K=E(a({__name:"AlbumDetailView",setup(a){i((s=>({"709190b6":u(E),"7081f152":u(K),"0b9db9a6":u(N),"3ac99aa0":u(Q)})));const E=b().get("fontColor"),K=b().get("fontBlack"),N=b().get("shadow"),Q=g("fontGray"),W=x(),Y=y(),$=Y.query.id+"",ss=Y.query.artistId+"",es=o({id:$,artistId:ss,name:"",cover:"",artist:"",publishTime:""}),as=o([]),is=o([]),os=l((()=>new Map(is.map(((s,e)=>[s.id,e]))))),ls=g("firstLoading"),ns=n(!1),ts=s=>{ns.value=s},rs=s=>{ns.value=s},ps=()=>{C("我有一个精品专辑分享给你："+es.name+"，地址：https://www.liyinchao.cloud/#"+Y.fullPath)};return w((async()=>{try{const s=await T(ss),{hotAlbums:e}=s;for(let a of e){const{id:s}=a;if(s!=$&&as.length<=5){const{picUrl:e,name:i,publishTime:o}=a;as.push({name:i,id:s,cover:e,publishTime:R(o),artistId:ss+""})}else if(as.length>5)break}}catch(s){k(A.ERROR,s.message)}try{const s=await I($),{album:{picUrl:e,artist:a,publishTime:i,name:o,company:l,description:n},songs:t}=s;es.name=o,es.cover=e,es.publishTime=R(i),es.artist=a.name,es.company=l,es.description=n,W.initLoveStatus(es,W.loveAlbumId);const r=[];t.forEach((s=>{L(r,is,s)})),W.initLoveMusic(is),z(r.join(","),is)}catch(s){k(A.ERROR,s.message)}ls.value=!1}),ls),(a,i)=>{const o=s,l=e;return f(),t("div",G,[r(m(u(U),{songs:is,"song-id-mapper":u(os),onCloseSelect:ts},null,8,["songs","song-id-mapper"]),[[p,ns.value]]),r(c("div",V,[m(o,{src:es.cover,loading:"lazy",class:"left"},null,8,["src"]),c("div",B,[c("h4",null,d(es.name),1),c("p",F,d(es.artist),1),c("p",null,d(es.publishTime),1),c("div",J,[m(u(S),{songs:is},null,8,["songs"]),m(u(O),{name:es.isLove?"取消收藏":"收藏",icon:es.isLove?"":"","icon-style":es.isLove?"color:#ff6a6a;":"",onClick:i[0]||(i[0]=s=>u(W).addLove(es,u(W).loveAlbum,u(W).loveAlbumId))},null,8,["name","icon","icon-style"]),ns.value?_("",!0):(f(),v(u(M),{key:0,"share-to":ps,onOpenSelect:rs}))])])],512),[[p,!ns.value]]),r(c("div",X,[m(u(D),{active:"songs"},{content:j((()=>[m(l,{label:"歌曲",name:"songs"},{default:j((()=>[m(u(P),{songs:is,"song-id-mapper":u(os)},null,8,["songs","song-id-mapper"]),m(u(q),{albums:as,title:"该歌手的其它专辑"},null,8,["albums"])])),_:1}),m(l,{label:"详情",name:"album"},{default:j((()=>[c("div",Z,[c("p",null,[h(" 专辑："),c("span",null,d(es.name),1)]),c("p",null,[h(" 歌手："),c("span",null,d(es.artist),1)]),c("p",null,[h(" 唱片公司："),c("span",null,d(es.company),1)]),c("p",null,[h(" 发布时间："),c("span",null,d(es.publishTime),1)]),c("p",null,[h(" 专辑简介："),c("span",H,d(es.description),1)])])])),_:1})])),_:1})],512),[[p,!ns.value]])])}}}),[["__scopeId","data-v-08545831"]]);export{K as default};
