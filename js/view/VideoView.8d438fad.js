import{y as e}from"../element-plus/element-plus.85c7c360.js";import{G as a,ax as s,Z as t,r as l,i,P as o,c as n,U as u,u as v,a as r,S as c,V as p,z as d,o as m,ay as _,az as h,n as y}from"../@vue/@vue.59fec093.js";import{g as f,b as j,k as g,e as x,d as w,_ as C}from"../../assets/index-ae815df4.js";/* empty css                                                                                                                     */import{A as b}from"../index/index.a173b601.js";import{B as G}from"../index/index.ff51c7ee.js";import{S as k}from"../index/index.e9118099.js";import{L as z}from"../index/index.78265425.js";/* empty css                                                                                                                     */import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../vue-router/vue-router.10a7fca4.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const R=e=>(_("data-v-9c4af03e"),e=e(),h(),e),S=["infinite-scroll-disabled"],V=R((()=>r("h4",{class:"title video-choice"},"视频类型",-1))),A=R((()=>r("h4",{class:"title all"},"全部视频",-1))),E=R((()=>r("span",{class:"iconfont"},"",-1))),L=C(a({__name:"VideoView",setup(a){s((e=>({e6c4902a:v(_),e6e3cef2:v(C),"38fa5e4a":v(L),"163d4a62":v(h),"73a24663":v(R)})));const _=f().get("fontColor"),h=f().get("shadow"),C=f().get("fontBlack"),R=f().get("themeColor"),L=d("fontGray"),M=t(["全部","韩国","日本","欧美","港台","内地"]),N=t(["全部","官方版","现场版","网易出品"]),B=t(["上升最快","最新","最热"]),O=l(0),U=l(0),I=l(0),P=t(new Map),T=t(new Map);let Z=t([]),q=t([]);const D=l(1500),F=l(30),H=l(!1),J=l(!1),K=d("firstLoading"),Q=d("hideScroll"),W=l(!1),X=i((()=>q.filter((e=>e.name.includes(Y.value)||e.artist.includes(Y.value))))),Y=l(""),$=e=>{Y.value=e},ee=async(e,a)=>{T.set(O.value+""+U.value+I.value,D.value),Q(),Z.splice(0),q.splice(0),"视频地区"==a?O.value=e:"视频来源"==a?U.value=e:I.value=e,F.value=40;const s=T.get(O.value+""+U.value+I.value);D.value=s||1500,await y();const t=P.get(O.value+""+U.value+I.value);t?(Z.push(...t),q.push(...t.slice(0,F.value))):te()},ae=()=>{Y.value||(H.value=!0,F.value+=10,F.value<Z.length?setTimeout((()=>{q.push(...Z.slice(q.length,F.value)),H.value=!1}),100):D.value==Z.length?(D.value*=2,W.value=!0):(q.push(...Z.slice(q.length)),x(w.SUCCESS,"已经到达底部！")))},se=()=>{W.value=!1,j((async()=>{try{const e=await g(D.value,M[O.value],N[U.value],B[I.value]),{data:a}=e;a.slice(Z.length).forEach((e=>{const{id:a,name:s,cover:t,playCount:l,artistName:i}=e;Z.push({id:a,name:s,image:t,playCount:l,artist:i})})),P.set(O.value+""+U.value+I.value,[...Z]),q.push(...Z.slice(q.length,F.value))}catch(e){x(w.ERROR,e.message)}J.value=!1,H.value=!1}),J)},te=()=>{j((async()=>{try{const e=await g(D.value,M[O.value],N[U.value],B[I.value]),{data:a}=e;a.forEach((e=>{const{id:a,name:s,cover:t,playCount:l,artistName:i}=e;Z.push({id:a,name:s,image:t,playCount:l,artist:i})})),P.set(O.value+""+U.value+I.value,[...Z]),q.push(...Z.slice(0,F.value))}catch(e){x(w.ERROR,e.message)}K.value=!1}),K)};return te(),(a,s)=>{const t=e;return o((m(),n("div",{class:"rvideo-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":H.value,style:{overflow:"auto"}},[u(v(k),{onGetContent:$}),V,u(v(G),{onGetActive:ee,title:"视频地区",activeValue:0,"show-title":!1,type:M,class:"area"},null,8,["type"]),u(v(G),{onGetActive:ee,title:"视频来源",activeValue:0,"show-title":!1,type:N},null,8,["type"]),u(v(G),{onGetActive:ee,title:"视频排序","show-title":!1,activeValue:0,type:B},null,8,["type"]),A,u(v(b),{mvs:v(X)},null,8,["mvs"]),u(v(z),{"is-loading":J.value},null,8,["is-loading"]),o(r("button",{class:"more-video",onClick:se},[c(" 更多精彩视频"),E],512),[[p,W.value]])],8,S)),[[t,ae]])}}}),[["__scopeId","data-v-9c4af03e"]]);export{L as default};
