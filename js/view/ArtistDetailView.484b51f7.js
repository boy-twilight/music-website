import{x as e,y as a}from"../element-plus/element-plus.93eaa55f.js";import{G as s,ax as i,d as t,Z as l,i as o,M as n,O as r,u as c,o as m,a as u,P as p,V as d,U as v,T as g,c as _,R as h,a7 as y,F as j,z as f,ay as x,az as b}from"../@vue/@vue.7ad02ad1.js";import{b as w}from"../vue-router/vue-router.53ff932e.js";import{u as L,j as R,g as z,Q as E,R as C,v as k,f as O,h as S,m as P,i as A,C as I,P as T,s as D,T as G,z as M,U,V as N,_ as V}from"../../static/index-5203d642.js";import{M as q}from"../index/index.390900a1.js";import{P as F,_ as H}from"../index.vue_vue_type_style_index_0_scoped_c70cb44b_lang/index.vue_vue_type_style_index_0_scoped_c70cb44b_lang.40b36b17.js";import{A as B}from"../index/index.3734e156.js";/* empty css                                                                                                                     */import{A as J}from"../index/index.18fd4524.js";import{O as K}from"../index/index.ef2dd8dc.js";import{L as Q}from"../index/index.ec5fa76b.js";import{N as Z}from"../index/index.539ac15d.js";import{T as W}from"../index/index.2343545c.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";/* empty css                                                                                                                     */const X={class:"artist-detail-container scroll-container"},Y={class:"header"},$=["src"],ee={class:"right"},ae={class:"name"},se={class:"info"},ie={key:0},te=(e=>(x("data-v-13144c32"),e=e(),b(),e))((()=>u("p",{class:"job"},"职业：歌手、词曲创作者",-1))),le={class:"fans"},oe={class:"header-operation"},ne={class:"content"},re={class:"detail"},ce={class:"desc"},me=V(s({__name:"ArtistDetailView",setup(s){i((e=>({"4291a1eb":c(x),42820287:c(b),"0a69a6db":c(ue),"679d973c":c(V),"7c2b9c63":c(me)})));const{fontColor:x,fontBlack:b,boxShadow:V,themeColor:me,fontGray:ue,contentHeight:pe}=L(),de=R(),ve=w(),ge=ve.query.id+"",_e=ve.query.score+"",he=t(!1),ye=f("firstLoading"),je=l([!1,!1]),fe=l({name:"",score:_e,id:ge,avatar:"",alias:[]}),xe=l([]),be=l([]),we=o((()=>new Map(be.map(((e,a)=>[e.id,a]))))),Le=t(1),Re=t(30),ze=o((()=>be.length)),Ee=o((()=>be.slice((Le.value-1)*Re.value,Le.value*Re.value))),Ce=l([]),ke=l([]),Oe=t(!1),Se=e=>{Le.value=e},Pe=e=>{Oe.value=e},Ae=e=>{Oe.value=e},Ie=()=>{D("我有一个宝藏歌手推荐给你："+fe.name+"，地址：https://www.liyinchao.cloud"+ve.fullPath)},Te=e=>{"album"==e&&0==ke.length?z((async()=>{try{const e=await G(ge),{hotAlbums:a}=e;a.forEach((e=>{const{picUrl:a,name:s,publishTime:i}=e;ke.push({name:s,id:e.id,cover:a,publishTime:M(i),artistId:ge+""})}))}catch(e){P(A.ERROR,e.message)}je[0]=0==ke.length,he.value=!1}),he):"mv"==e&&0==Ce.length?z((async()=>{try{const e=await U(ge),{mvs:a}=e;a.forEach((e=>{const{id:a,name:s,artistName:i,imgurl16v9:t,playCount:l}=e;Ce.push({id:a,name:s,artist:i,image:t,playCount:l})}))}catch(e){P(A.ERROR,e.message)}je[1]=0==Ce.length,he.value=!1}),he):"detail"==e&&0==xe.length&&z((async()=>{try{const e=await N(ge),{introduction:a}=e;a.forEach((e=>{xe.push({title:e.ti,content:e.txt})}))}catch(e){P(A.ERROR,e.message)}he.value=!1}),he)};return z((async()=>{try{(await Promise.all([E(ge),C(ge,1e3)])).forEach((async(e,a)=>{if(0==a){const{artist:a}=e,{name:s,alias:i,picUrl:t,briefDesc:l}=a;fe.name=s,fe.alias=i,fe.avatar=t,fe.briefDesc=l,de.initLoveStatus(fe,de.loveSingerId)}else if(1==a){const{songs:a}=e,s=a.map((e=>e.id)).join(","),i=await k(s),{songs:t}=i;t.forEach((e=>{O(be,e)})),de.initLoveMusic(be),S(be),ye.value=!1}}))}catch(e){P(A.ERROR,e.message)}}),ye),(s,i)=>{const t=a,l=e;return m(),n(l,{"max-height":c(pe)},{default:r((()=>{var e,a;return[u("div",X,[p(v(c(K),{songs:c(Ee),"song-id-mapper":c(we),onCloseSelect:Pe},null,8,["songs","song-id-mapper"]),[[d,Oe.value]]),p(u("div",Y,[u("img",{src:fe.avatar,class:"left"},null,8,$),u("div",ee,[u("h4",ae,g(fe.name),1),u("div",se,[0!=(null==(e=fe.alias)?void 0:e.length)?(m(),_("p",ie," 英文名："+g(null==(a=fe.alias)?void 0:a.join("、")),1)):h("",!0),te]),u("span",le,"粉丝数："+g(fe.score),1),u("div",oe,[v(c(F),{songs:c(Ee)},null,8,["songs"]),v(c(I),{name:fe.isLove?"取消关注":"关注",icon:fe.isLove?"":"","icon-style":fe.isLove?"color:#ff6a6a;":"",onClick:i[0]||(i[0]=e=>c(de).addLove(fe,c(de).loveSinger,c(de).loveSingerId))},null,8,["name","icon","icon-style"]),Oe.value?h("",!0):(m(),n(c(q),{key:0,"share-to":Ie,onOpenSelect:Ae}))])])],512),[[d,!Oe.value]]),p(u("div",ne,[v(c(W),{active:"hot",onGetActive:Te},{content:r((()=>[v(t,{label:"精选",name:"hot"},{default:r((()=>[v(c(H),{songs:c(Ee),"page-size":Re.value,"song-id-mapper":c(we)},null,8,["songs","page-size","song-id-mapper"]),p(v(c(T),{"cur-page":Le.value,"page-size":Re.value,total:c(ze),onPageChange:Se},null,8,["cur-page","page-size","total"]),[[d,Re.value<c(ze)]])])),_:1}),v(t,{label:"专辑",name:"album"},{default:r((()=>[p(v(c(Z),{text:"歌手暂无专辑",size:280},null,512),[[d,je[0]]]),v(c(Q),{isLoading:he.value},null,8,["isLoading"]),p(v(c(B),{albums:ke,"show-pagination":!0},null,8,["albums"]),[[d,!je[0]]])])),_:1}),v(t,{label:"视频",name:"mv"},{default:r((()=>[p(v(c(Z),{text:"歌手暂无视频",size:280},null,512),[[d,je[1]]]),v(c(Q),{isLoading:he.value},null,8,["isLoading"]),p(v(c(J),{mvs:Ce,"show-pagination":!0},null,8,["mvs"]),[[d,!je[1]]])])),_:1}),v(t,{label:"详情",name:"detail"},{default:r((()=>[v(c(Q),{isLoading:he.value},null,8,["isLoading"]),u("div",re,[u("p",ce,g(fe.briefDesc),1),(m(!0),_(j,null,y(xe,(e=>p((m(),_("div",{key:e.title},[u("h4",null,g(e.title),1),u("p",null,g(e.content),1)])),[[d,xe.length>0]]))),128))])])),_:1})])),_:1})],512),[[d,!Oe.value]])])]})),_:1},8,["max-height"])}}}),[["__scopeId","data-v-13144c32"]]);export{me as default};
