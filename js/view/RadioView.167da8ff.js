import{j as e,y as s}from"../element-plus/element-plus.85c7c360.js";import{G as a,ax as i,Z as t,r as o,P as l,c as r,a as n,F as d,a7 as p,U as c,u,o as m,M as v,ay as _,az as j,z as y}from"../@vue/@vue.59fec093.js";import{u as f}from"../vue-router/vue-router.10a7fca4.js";import{g as h,b as g,Y as x,e as R,d as b,Z as k,$ as w,_ as C}from"../../assets/index-41f64cc1.js";/* empty css                                                                                                                     */import{A as E}from"../index/index.3aac951f.js";import{L as z}from"../index/index.f8f4f34d.js";/* empty css                                                                                                                     */import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const S=["infinite-scroll-disabled"],U=(e=>(_("data-v-1d57168e"),e=e(),j(),e))((()=>n("h4",{class:"r-title"},"精彩推荐",-1))),L={class:"banner"},O=C(a({__name:"RadioView",setup(a){i((e=>({"737993ae":u(_),"2c4bfd92":u(j)})));const _=h().get("shadow"),j=h().get("fontColor"),C=f(),O=t([]),A=t([]),G=t([]),I=o(0),Z=y("firstLoading"),q=y("hideScroll"),B=o(!1),F=o(!1),M=async()=>{const e=await w(A[I.value].id),{djRadios:s}=e;G.push([]),s.forEach((e=>{const{picUrl:s,name:a,id:i,playCount:t}=e;G[I.value].push({name:a,id:i,image:s,playCount:t,creator:{nickname:"",avatarUrl:""},tag:[],description:""})})),B.value=!1,F.value=!1},P=()=>{B.value=!0,F.value=!0,I.value++,I.value<A.length?setTimeout((()=>{M()}),1e3):(F.value=!1,R(b.SUCCESS,"已经到达底部！"))};return g((async()=>{try{const e=await x(),{data:s}=e;s.forEach((e=>{const{targetId:s,pic:a}=e;O.push({id:s,pic:a})}))}catch(e){R(b.ERROR,e.message)}try{const e=await k(),{categories:s}=e;s.forEach((e=>{const{id:s,name:a}=e;A.push({id:s,name:a})}))}catch(e){R(b.ERROR,e.message)}try{M()}catch(e){R(b.ERROR,e.message)}Z.value=!1}),Z),(a,i)=>{const t=e,o=s;return l((m(),r("div",{class:"radio-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":B.value,style:{overflow:"auto"}},[U,n("div",L,[(m(!0),r(d,null,p(O,(e=>(m(),v(t,{key:e.id,src:e.pic,onClick:s=>{return a=e.id,q(),void C.push({name:"playlist",query:{id:a,type:"radio"}});var a}},null,8,["src","onClick"])))),128))]),(m(!0),r(d,null,p(G,((e,s)=>(m(),r("div",{class:"radio",key:A[s].id},[c(u(E),{title:A[s].name,playlists:e,type:"radio"},null,8,["title","playlists"])])))),128)),c(u(z),{"is-loading":F.value},null,8,["is-loading"])],8,S)),[[o,P]])}}}),[["__scopeId","data-v-1d57168e"]]);export{O as default};
