import{g as e,a as t,b as a,C as n,s,R as o,X as u,z as l,j as i,k as r,e as V,c,_ as d}from"../../static/index-a47c3a7a.js";import{M as m}from"../index/index.3b3e6026.js";import{P as p,_ as f}from"../index.vue_vue_type_style_index_0_scoped_2dc764e5_lang/index.vue_vue_type_style_index_0_scoped_2dc764e5_lang.fc383066.js";import{O as v}from"../index/index.3beb5c84.js";import{A as _}from"../index/index.43c04425.js";/* empty css                                                                                                                     */import{T as g}from"../index/index.dbb8a4d6.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../nprogress/nprogress.204a1a2a.js";import"../dplayer/dplayer.87601a3d.js";import"../lodash-es/lodash-es.8b477e85.js";/* empty css                                   */const h={class:"album-detail-container scroll-container"},y={class:"header"},N={class:"right"},x={class:"artist"},b={class:"header-operation"},E={class:"content"},j={class:"info"},w={class:"desc"},S=d(Vue.defineComponent({__name:"AlbumDetailView",setup(d){Vue.useCssVars((e=>({"5e1fa897":Vue.unref(S),"5e100933":Vue.unref(T),"308189e4":Vue.unref(k),"7eea1aaf":Vue.unref(C)})));const S=e().get("fontColor"),T=e().get("fontBlack"),k=e().get("shadow"),C=Vue.inject("fontGray"),D=t(),L=VueRouter.useRoute(),A=L.query.id+"",I=L.query.artistId+"",R=Vue.reactive({id:A,artistId:I,name:"",cover:"",artist:"",publishTime:""}),B=Vue.reactive([]),M=Vue.reactive([]),O=Vue.computed((()=>new Map(M.map(((e,t)=>[e.id,t]))))),P=Vue.inject("firstLoading"),q=Vue.ref(!1),z=e=>{q.value=e},U=e=>{q.value=e},G=()=>{s("我有一个精品专辑分享给你："+R.name+"，地址：https://www.liyinchao.cloud/#"+L.fullPath)};return a((async()=>{try{(await Promise.all([o(I),u(A)])).forEach(((e,t)=>{if(0==t){const{hotAlbums:t}=e;for(let e of t){const{id:t}=e;if(t!=A&&B.length<=5){const{picUrl:a,name:n,publishTime:s}=e;B.push({name:n,id:t,cover:a,publishTime:l(s),artistId:I+""})}else if(B.length>5)break}}else if(1==t){const{album:{picUrl:t,artist:a,publishTime:n,name:s,company:o,description:u},songs:V}=e;R.name=s,R.cover=t,R.publishTime=l(n),R.artist=a.name,R.company=o,R.description=u,D.initLoveStatus(R,D.loveAlbumId);const c=[];V.forEach((e=>{i(c,M,e)})),D.initLoveMusic(M),r(c.join(","),M)}}))}catch(e){V(c.ERROR,e.message)}P.value=!1}),P),(e,t)=>{const a=Vue.resolveComponent("el-image"),s=Vue.resolveComponent("el-tab-pane");return Vue.openBlock(),Vue.createElementBlock("div",h,[Vue.withDirectives(Vue.createVNode(Vue.unref(v),{songs:M,"song-id-mapper":Vue.unref(O),onCloseSelect:z},null,8,["songs","song-id-mapper"]),[[Vue.vShow,q.value]]),Vue.withDirectives(Vue.createElementVNode("div",y,[Vue.createVNode(a,{src:R.cover,loading:"lazy",class:"left"},null,8,["src"]),Vue.createElementVNode("div",N,[Vue.createElementVNode("h4",null,Vue.toDisplayString(R.name),1),Vue.createElementVNode("p",x,Vue.toDisplayString(R.artist),1),Vue.createElementVNode("p",null,Vue.toDisplayString(R.publishTime),1),Vue.createElementVNode("div",b,[Vue.createVNode(Vue.unref(p),{songs:M},null,8,["songs"]),Vue.createVNode(Vue.unref(n),{name:R.isLove?"取消收藏":"收藏",icon:R.isLove?"":"","icon-style":R.isLove?"color:#ff6a6a;":"",onClick:t[0]||(t[0]=e=>Vue.unref(D).addLove(R,Vue.unref(D).loveAlbum,Vue.unref(D).loveAlbumId))},null,8,["name","icon","icon-style"]),q.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createBlock(Vue.unref(m),{key:0,"share-to":G,onOpenSelect:U}))])])],512),[[Vue.vShow,!q.value]]),Vue.withDirectives(Vue.createElementVNode("div",E,[Vue.createVNode(Vue.unref(g),{active:"songs"},{content:Vue.withCtx((()=>[Vue.createVNode(s,{label:"歌曲",name:"songs"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(f),{songs:M,"song-id-mapper":Vue.unref(O)},null,8,["songs","song-id-mapper"]),Vue.createVNode(Vue.unref(_),{albums:B,title:"该歌手的其它专辑"},null,8,["albums"])])),_:1}),Vue.createVNode(s,{label:"详情",name:"album"},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",j,[Vue.createElementVNode("p",null,[Vue.createTextVNode(" 专辑："),Vue.createElementVNode("span",null,Vue.toDisplayString(R.name),1)]),Vue.createElementVNode("p",null,[Vue.createTextVNode(" 歌手："),Vue.createElementVNode("span",null,Vue.toDisplayString(R.artist),1)]),Vue.createElementVNode("p",null,[Vue.createTextVNode(" 唱片公司："),Vue.createElementVNode("span",null,Vue.toDisplayString(R.company),1)]),Vue.createElementVNode("p",null,[Vue.createTextVNode(" 发布时间："),Vue.createElementVNode("span",null,Vue.toDisplayString(R.publishTime),1)]),Vue.createElementVNode("p",null,[Vue.createTextVNode(" 专辑简介："),Vue.createElementVNode("span",w,Vue.toDisplayString(R.description),1)])])])),_:1})])),_:1})],512),[[Vue.vShow,!q.value]])])}}}),[["__scopeId","data-v-a9e356ee"]]);export{S as default};
