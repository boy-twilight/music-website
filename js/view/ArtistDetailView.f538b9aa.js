import{x as e,y as a}from"../element-plus/element-plus.79622da4.js";import{G as s,ax as t,Z as i,d as l,i as o,M as n,O as r,u,o as c,a as m,P as d,V as p,U as v,T as g,c as _,R as h,a7 as f,F as y,z as j,ay as x,az as b}from"../@vue/@vue.7ad02ad1.js";import{b as w}from"../vue-router/vue-router.53ff932e.js";import{u as L,h as R,O as z,N as E,Q as k,r as S,e as O,f as C,m as P,M as U,s as A,C as I,P as M,o as T,R as D,x as G,T as N,U as q,p as B,_ as F}from"../../static/index-512da842.js";import{M as H}from"../index/index.c514300f.js";import{P as V,_ as J}from"../index.vue_vue_type_style_index_0_scoped_b3813f91_lang/index.vue_vue_type_style_index_0_scoped_b3813f91_lang.980ae29f.js";import{A as K}from"../index/index.355cd39a.js";/* empty css                                                                                                                     */import{A as Q}from"../index/index.77e3a683.js";import{O as Z}from"../index/index.4bbb9acd.js";import{L as W}from"../index/index.2926ce1d.js";import{N as X}from"../index/index.25cb2651.js";import{T as Y}from"../index/index.b070bbe6.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";/* empty css                                                                                                                     */const $={class:"artist-detail-container scroll-container"},ee={class:"header"},ae=["src"],se={class:"right"},te={class:"name"},ie={class:"info"},le={key:0},oe=(e=>(x("data-v-db76e75d"),e=e(),b(),e))((()=>m("p",{class:"job"},"职业：歌手、词曲创作者",-1))),ne={class:"fans"},re={class:"header-operation"},ue={class:"content"},ce={class:"detail"},me={class:"desc"},de=F(s({__name:"ArtistDetailView",setup(s){t((e=>({"5c840e80":u(x),"5ca34d48":u(b),"619ca166":u(pe),"5b5d8b37":u(F),"5aebbfa4":u(de)})));const{fontColor:x,fontBlack:b,boxShadow:F,themeColor:de,fontGray:pe,contentHeight:ve}=L(),ge=R(),_e=w(),he=_e.query.id+"",fe=_e.query.score+"",ye=i({name:"",score:fe,id:he,avatar:"",alias:[]}),je=i([]),xe=i([]),be=l(1),we=l(z),Le=o((()=>xe.length)),Re=o((()=>xe.slice((be.value-1)*we.value,be.value*we.value))),ze=i([]),Ee=i([]),ke=l(!1),Se=j("firstLoading"),Oe=i(new Map([["album",!1],["mv",!1]])),Ce=l(!1),Pe=l(),Ue=()=>{T("我有一个宝藏歌手推荐给你："+ye.name+"，地址：https://www.liyinchao.cloud"+_e.fullPath)},Ae=async e=>{if("album"==e){if(0!=Ee.length)return;ke.value=!0;try{const e=await D(he),{hotAlbums:a}=e;a.forEach((e=>{const{picUrl:a,name:s,publishTime:t}=e;Ee.push({name:s,id:e.id,cover:a,publishTime:G(t),artistId:he+""})}))}catch(a){P(U.ERROR,a.message)}Oe.set("album",0==Ee.length)}else if("mv"==e){if(0!=ze.length)return;ke.value=!0;try{const e=await N(he),{mvs:a}=e;a.forEach((e=>{const{id:a,name:s,artistName:t,imgurl16v9:i,playCount:l}=e;ze.push({id:a,name:s,artist:t,image:i,playCount:l})}))}catch(a){P(U.ERROR,a.message)}Oe.set("mv",0==ze.length)}else if("detail"==e){if(0!=je.length)return;ke.value=!0;try{const e=await q(he),{introduction:a}=e;a.forEach((e=>{je.push({title:e.ti,content:e.txt})}))}catch(a){P(U.ERROR,a.message)}}ke.value=!1};return(async()=>{Se.value=!0;try{(await Promise.all([E(he),k(he,1e3)])).forEach((async(e,a)=>{if(0==a){const{artist:a}=e,{name:s,alias:t,picUrl:i,briefDesc:l}=a;ye.name=s,ye.alias=t,ye.avatar=i,ye.briefDesc=l,ge.initLoveStatus(ye,ge.loveSingerId)}else if(1==a){const{songs:a}=e,s=a.map((e=>e.id)).join(","),t=await S(s),{songs:i}=t;i.forEach((e=>{O(xe,e)})),ge.initLoveMusic(xe),C(xe)}}))}catch(e){P(U.ERROR,e.message)}await A(B),Se.value=!1})(),(s,t)=>{const i=a,l=e;return c(),n(l,{"max-height":u(ve)},{default:r((()=>{var e,a;return[m("div",$,[d(v(u(Z),{"show-select":Ce.value,"onUpdate:showSelect":t[0]||(t[0]=e=>Ce.value=e),songs:u(Re),ref_key:"batch",ref:Pe},null,8,["show-select","songs"]),[[p,Ce.value]]),d(m("div",ee,[m("img",{src:ye.avatar,class:"left"},null,8,ae),m("div",se,[m("h4",te,g(ye.name),1),m("div",ie,[0!=(null==(e=ye.alias)?void 0:e.length)?(c(),_("p",le," 英文名："+g(null==(a=ye.alias)?void 0:a.join("、")),1)):h("",!0),oe]),m("span",ne,"粉丝数："+g(ye.score),1),m("div",re,[v(u(V),{songs:u(Re)},null,8,["songs"]),v(u(I),{name:ye.isLove?"取消关注":"关注",icon:ye.isLove?"":"","icon-style":ye.isLove?"color:#ff6a6a;":"",onClick:t[1]||(t[1]=e=>u(ge).addLove(ye,u(ge).loveSinger,u(ge).loveSingerId))},null,8,["name","icon","icon-style"]),Ce.value?h("",!0):(c(),n(u(H),{key:0,onShare:Ue,onOpenSelect:t[2]||(t[2]=e=>{var a;return null==(a=Pe.value)?void 0:a.openSelectBox()})}))])])],512),[[p,!Ce.value]]),d(m("div",ue,[v(u(Y),{active:"hot",onGetActive:Ae},{content:r((()=>[v(i,{label:"精选",name:"hot"},{default:r((()=>[v(u(J),{songs:u(Re),"page-size":we.value},null,8,["songs","page-size"]),d(v(u(M),{"cur-page":be.value,"onUpdate:curPage":t[3]||(t[3]=e=>be.value=e),"page-size":we.value,total:u(Le)},null,8,["cur-page","page-size","total"]),[[p,we.value<u(Le)]])])),_:1}),v(i,{label:"专辑",name:"album"},{default:r((()=>[d(v(u(X),{text:"歌手暂无专辑",size:280},null,512),[[p,Oe.get("album")]]),v(u(W),{isLoading:ke.value},null,8,["isLoading"]),d(v(u(K),{albums:Ee,"show-pagination":!0},null,8,["albums"]),[[p,!Oe.get("album")]])])),_:1}),v(i,{label:"视频",name:"mv"},{default:r((()=>[d(v(u(X),{text:"歌手暂无视频",size:280},null,512),[[p,Oe.get("mv")]]),v(u(W),{isLoading:ke.value},null,8,["isLoading"]),d(v(u(Q),{mvs:ze,"show-pagination":!0},null,8,["mvs"]),[[p,!Oe.get("mv")]])])),_:1}),v(i,{label:"详情",name:"detail"},{default:r((()=>[v(u(W),{isLoading:ke.value},null,8,["isLoading"]),m("div",ce,[m("p",me,g(ye.briefDesc),1),(c(!0),_(y,null,f(je,(e=>d((c(),_("div",{key:e.title},[m("h4",null,g(e.title),1),m("p",null,g(e.content),1)])),[[p,je.length>0]]))),128))])])),_:1})])),_:1})],512),[[p,!Ce.value]])])]})),_:1},8,["max-height"])}}}),[["__scopeId","data-v-db76e75d"]]);export{de as default};
