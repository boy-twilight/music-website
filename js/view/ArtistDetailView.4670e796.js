import{g as e,a,b as t,C as u,P as n,s,R as o,z as i,e as l,c as r,T as c,U as V,V as d,W as m,A as p,j as v,k as f,_ as g}from"../../static/index-a47c3a7a.js";import{M as h}from"../index/index.3b3e6026.js";import{P as _,_ as y}from"../index.vue_vue_type_style_index_0_scoped_2dc764e5_lang/index.vue_vue_type_style_index_0_scoped_2dc764e5_lang.fc383066.js";import{A as w}from"../index/index.43c04425.js";/* empty css                                                                                                                     */import{A as x}from"../index/index.1a5275e8.js";import{O as N}from"../index/index.3beb5c84.js";import{L as E}from"../index/index.4a520f69.js";import{N as j}from"../index/index.456753dc.js";import{T as b}from"../index/index.dbb8a4d6.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../nprogress/nprogress.204a1a2a.js";import"../dplayer/dplayer.87601a3d.js";import"../lodash-es/lodash-es.8b477e85.js";/* empty css                                   *//* empty css                                                                                                                     */const S={class:"artist-detail-container scroll-container"},k={class:"header"},D=["src"],C={class:"right"},L={class:"name"},R={class:"info"},B={key:0},z=(e=>(Vue.pushScopeId("data-v-c1a2b822"),e=e(),Vue.popScopeId(),e))((()=>Vue.createElementVNode("p",{class:"job"},"职业：歌手、词曲创作者",-1))),A={class:"fans"},I={class:"header-operation"},O={class:"content"},P={class:"detail"},T={class:"desc"},q=g(Vue.defineComponent({__name:"ArtistDetailView",setup(g){Vue.useCssVars((e=>({"51d34cc9":Vue.unref(q),"51c3ad65":Vue.unref(M),"4cf8283d":Vue.unref(F),"491a4180":Vue.unref(U),"551f4d45":Vue.unref(G)})));const q=e().get("fontColor"),M=e().get("fontBlack"),U=e().get("shadow"),G=e().get("themeColor"),F=Vue.inject("fontGray"),W=a(),H=VueRouter.useRoute(),J=H.query.id+"",K=H.query.score+"",Q=Vue.ref(!1),X=Vue.inject("firstLoading"),Y=Vue.reactive([!1,!1]),Z=Vue.reactive({name:"",score:K,id:J,avatar:"",alias:[]}),$=Vue.reactive([]),ee=Vue.reactive([]),ae=Vue.computed((()=>new Map(ee.map(((e,a)=>[e.id,a]))))),te=Vue.ref(1),ue=Vue.ref(30),ne=Vue.computed((()=>ee.length)),se=Vue.computed((()=>ee.slice((te.value-1)*ue.value,te.value*ue.value))),oe=Vue.reactive([]),ie=Vue.reactive([]),le=Vue.ref(!1),re=e=>{te.value=e},ce=e=>{le.value=e},Ve=e=>{le.value=e},de=()=>{s("我有一个宝藏歌手推荐给你："+Z.name+"，地址：https://www.liyinchao.cloud/#"+H.fullPath)},me=e=>{"album"==e&&0==ie.length?t((async()=>{try{const e=await o(J),{hotAlbums:a}=e;a.forEach((e=>{const{picUrl:a,name:t,publishTime:u}=e;ie.push({name:t,id:e.id,cover:a,publishTime:i(u),artistId:J+""})}))}catch(e){l(r.ERROR,e.message)}Y[0]=0==ie.length,Q.value=!1}),Q):"mv"==e&&0==oe.length?t((async()=>{try{const e=await c(J),{mvs:a}=e;a.forEach((e=>{const{id:a,name:t,artistName:u,imgurl16v9:n,playCount:s}=e;oe.push({id:a,name:t,artist:u,image:n,playCount:s})}))}catch(e){l(r.ERROR,e.message)}Y[1]=0==oe.length,Q.value=!1}),Q):"detail"==e&&0==$.length&&t((async()=>{try{const e=await V(J),{introduction:a}=e;a.forEach((e=>{$.push({title:e.ti,content:e.txt})}))}catch(e){l(r.ERROR,e.message)}Q.value=!1}),Q)};return t((async()=>{try{(await Promise.all([d(J),m(J,1e3)])).forEach((async(e,a)=>{if(0==a){const{artist:a}=e,{name:t,alias:u,picUrl:n,briefDesc:s}=a;Z.name=t,Z.alias=u,Z.avatar=n,Z.briefDesc=s,W.initLoveStatus(Z,W.loveSingerId)}else if(1==a){const{songs:a}=e,t=a.map((e=>e.id)).join(","),u=await p(t),{songs:n}=u;n.forEach((e=>{v([],ee,e)})),W.initLoveMusic(ee),f(t,ee),X.value=!1}}))}catch(e){l(r.ERROR,e.message)}}),X),(e,a)=>{var t,s;const o=Vue.resolveComponent("el-tab-pane");return Vue.openBlock(),Vue.createElementBlock("div",S,[Vue.withDirectives(Vue.createVNode(Vue.unref(N),{songs:Vue.unref(se),"song-id-mapper":Vue.unref(ae),onCloseSelect:ce},null,8,["songs","song-id-mapper"]),[[Vue.vShow,le.value]]),Vue.withDirectives(Vue.createElementVNode("div",k,[Vue.createElementVNode("img",{src:Z.avatar,class:"left"},null,8,D),Vue.createElementVNode("div",C,[Vue.createElementVNode("h4",L,Vue.toDisplayString(Z.name),1),Vue.createElementVNode("div",R,[0!=(null==(t=Z.alias)?void 0:t.length)?(Vue.openBlock(),Vue.createElementBlock("p",B," 英文名："+Vue.toDisplayString(null==(s=Z.alias)?void 0:s.join("、")),1)):Vue.createCommentVNode("",!0),z]),Vue.createElementVNode("span",A,"粉丝数："+Vue.toDisplayString(Z.score),1),Vue.createElementVNode("div",I,[Vue.createVNode(Vue.unref(_),{songs:Vue.unref(se)},null,8,["songs"]),Vue.createVNode(Vue.unref(u),{name:Z.isLove?"取消关注":"关注",icon:Z.isLove?"":"","icon-style":Z.isLove?"color:#ff6a6a;":"",onClick:a[0]||(a[0]=e=>Vue.unref(W).addLove(Z,Vue.unref(W).loveSinger,Vue.unref(W).loveSingerId))},null,8,["name","icon","icon-style"]),le.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createBlock(Vue.unref(h),{key:0,"share-to":de,onOpenSelect:Ve}))])])],512),[[Vue.vShow,!le.value]]),Vue.withDirectives(Vue.createElementVNode("div",O,[Vue.createVNode(Vue.unref(b),{active:"hot",onGetActive:me},{content:Vue.withCtx((()=>[Vue.createVNode(o,{label:"精选",name:"hot"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(y),{songs:Vue.unref(se),"page-size":ue.value,"song-id-mapper":Vue.unref(ae)},null,8,["songs","page-size","song-id-mapper"]),Vue.withDirectives(Vue.createVNode(Vue.unref(n),{"cur-page":te.value,"page-size":ue.value,total:Vue.unref(ne),onPageChange:re},null,8,["cur-page","page-size","total"]),[[Vue.vShow,ue.value<Vue.unref(ne)]])])),_:1}),Vue.createVNode(o,{label:"专辑",name:"album"},{default:Vue.withCtx((()=>[Vue.withDirectives(Vue.createVNode(Vue.unref(j),{text:"歌手暂无专辑",size:280},null,512),[[Vue.vShow,Y[0]]]),Vue.createVNode(Vue.unref(E),{isLoading:Q.value},null,8,["isLoading"]),Vue.withDirectives(Vue.createVNode(Vue.unref(w),{albums:ie,"show-pagination":!0},null,8,["albums"]),[[Vue.vShow,!Y[0]]])])),_:1}),Vue.createVNode(o,{label:"视频",name:"mv"},{default:Vue.withCtx((()=>[Vue.withDirectives(Vue.createVNode(Vue.unref(j),{text:"歌手暂无视频",size:280},null,512),[[Vue.vShow,Y[1]]]),Vue.createVNode(Vue.unref(E),{isLoading:Q.value},null,8,["isLoading"]),Vue.withDirectives(Vue.createVNode(Vue.unref(x),{mvs:oe,"show-pagination":!0},null,8,["mvs"]),[[Vue.vShow,!Y[1]]])])),_:1}),Vue.createVNode(o,{label:"详情",name:"detail"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(E),{isLoading:Q.value},null,8,["isLoading"]),Vue.createElementVNode("div",P,[Vue.createElementVNode("p",T,Vue.toDisplayString(Z.briefDesc),1),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList($,(e=>Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("div",{key:e.title},[Vue.createElementVNode("h4",null,Vue.toDisplayString(e.title),1),Vue.createElementVNode("p",null,Vue.toDisplayString(e.content),1)])),[[Vue.vShow,$.length>0]]))),128))])])),_:1})])),_:1})],512),[[Vue.vShow,!le.value]])])}}}),[["__scopeId","data-v-c1a2b822"]]);export{q as default};
