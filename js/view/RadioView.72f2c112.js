import{g as s,y as e}from"../element-plus/element-plus.f4dce189.js";import{G as a,ax as i,Z as t,r as o,P as l,c as r,a as n,F as c,a7 as p,U as d,u as m,o as u,M as v,ay as j,az as y,z as f}from"../@vue/@vue.59fec093.js";import{g,b as h,Y as _,e as x,d as R,Z as k,$ as w,_ as b}from"../../assets/index-831d6614.js";import{u as C}from"../vue-router/vue-router.10a7fca4.js";/* empty css                                                                                                                     */import{A as E}from"../index/index.2d322a4f.js";import{L as z}from"../Loading/Loading.24f30fa2.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const L=["infinite-scroll-disabled"],S=(s=>(j("data-v-22cb8ffd"),s=s(),y(),s))((()=>n("h4",{class:"r-title"},"精彩推荐",-1))),U={class:"banner"},O=b(a({__name:"RadioView",setup(a){i((s=>({e1f2232c:m(j),"05675bf3":m(y)})));const j=g().get("shadow"),y=g().get("fontColor"),b=C(),O=t([]),A=t([]),I=t([]),Z=o(0),q=f("firstLoading"),B=f("hideScroll"),F=o(!1),G=o(!1),K=async()=>{const s=await w(A[Z.value].id),{djRadios:e}=s;I.push([]),e.forEach((s=>{const{picUrl:e,name:a,id:i,playCount:t}=s;I[Z.value].push({name:a,id:i,image:e,playCount:t,creator:{nickname:"",avatarUrl:""},tag:[],description:""})})),F.value=!1,G.value=!1},M=()=>{F.value=!0,G.value=!0,Z.value++,Z.value<A.length?setTimeout((()=>{K()}),1e3):(G.value=!1,x(R.SUCCESS,"已经到达底部！"))};return h((async()=>{try{const s=await _(),{data:e}=s;e.forEach((s=>{const{targetId:e,pic:a}=s;O.push({id:e,pic:a})}))}catch(s){x(R.ERROR,s.message)}try{const s=await k(),{categories:e}=s;e.forEach((s=>{const{id:e,name:a}=s;A.push({id:e,name:a})}))}catch(s){x(R.ERROR,s.message)}try{K()}catch(s){x(R.ERROR,s.message)}q.value=!1}),q),(a,i)=>{const t=s,o=e;return l((u(),r("div",{class:"radio-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":F.value,style:{overflow:"auto"}},[S,n("div",U,[(u(!0),r(c,null,p(O,(s=>(u(),v(t,{key:s.id,src:s.pic,onClick:e=>{return a=s.id,B(),void b.push({name:"playlist",query:{id:a,type:"radio"}});var a}},null,8,["src","onClick"])))),128))]),(u(!0),r(c,null,p(I,((s,e)=>(u(),r("div",{class:"radio",key:A[e].id},[d(m(E),{title:A[e].name,playlists:s,type:"radio"},null,8,["title","playlists"])])))),128)),d(z,{"is-loading":G.value},null,8,["is-loading"])],8,L)),[[o,M]])}}}),[["__scopeId","data-v-22cb8ffd"]]);export{O as default};
