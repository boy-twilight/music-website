import{g as e,b as t,e as a,c as i,Y as s,Z as l,$ as o,_ as n}from"../../static/index-a47c3a7a.js";/* empty css                                                                                                                     */import{A as r}from"../index/index.e9db409e.js";import{L as u}from"../index/index.4a520f69.js";/* empty css                                                                                                                     */import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../nprogress/nprogress.204a1a2a.js";import"../dplayer/dplayer.87601a3d.js";import"../lodash-es/lodash-es.8b477e85.js";/* empty css                                   */const c=["infinite-scroll-disabled"],d=(e=>(Vue.pushScopeId("data-v-d6405754"),e=e(),Vue.popScopeId(),e))((()=>Vue.createElementVNode("h4",{class:"r-title"},"精彩推荐",-1))),p={class:"banner"},V=n(Vue.defineComponent({__name:"RadioView",setup(n){Vue.useCssVars((e=>({"919ffb34":Vue.unref(V),"2d906fef":Vue.unref(m)})));const V=e().get("shadow"),m=e().get("fontColor"),v=VueRouter.useRouter(),_=Vue.reactive([]),f=Vue.reactive([]),y=Vue.reactive([]),g=Vue.ref(0),h=Vue.inject("firstLoading"),k=Vue.inject("hideScroll"),j=Vue.ref(!1),x=Vue.ref(!1),E=async()=>{const e=await o(f[g.value].id),{djRadios:t}=e;y.push([]),t.forEach((e=>{const{picUrl:t,name:a,id:i,playCount:s}=e;y[g.value].push({name:a,id:i,image:t,playCount:s,creator:{nickname:"",avatarUrl:""},tag:[],description:""})})),j.value=!1,x.value=!1},B=()=>{j.value=!0,x.value=!0,g.value++,g.value<f.length?setTimeout((()=>{E()}),1e3):(x.value=!1,a(i.SUCCESS,"已经到达底部！"))};return t((async()=>{try{(await Promise.all([s(),l()])).forEach(((e,t)=>{if(0==t){const{data:t}=e;t.forEach((e=>{const{targetId:t,pic:a}=e;_.push({id:t,pic:a})}))}else if(1==t){const{categories:t}=e;t.forEach((e=>{const{id:t,name:a}=e;f.push({id:t,name:a})}))}}))}catch(e){a(i.ERROR,e.message)}await E(),h.value=!1}),h),(e,t)=>{const a=Vue.resolveComponent("el-image"),i=Vue.resolveDirective("infinite-scroll");return Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("div",{class:"radio-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":j.value,style:{overflow:"auto"}},[d,Vue.createElementVNode("div",p,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(_,(e=>(Vue.openBlock(),Vue.createBlock(a,{key:e.id,src:e.pic,onClick:t=>{return a=e.id,k(),void v.push({name:"playlist",query:{id:a,type:"radio"}});var a}},null,8,["src","onClick"])))),128))]),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(y,((e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"radio",key:f[t].id},[Vue.createVNode(Vue.unref(r),{title:f[t].name,playlists:e,type:"radio"},null,8,["title","playlists"])])))),128)),Vue.createVNode(Vue.unref(u),{"is-loading":x.value},null,8,["is-loading"])],8,c)),[[i,B]])}}}),[["__scopeId","data-v-d6405754"]]);export{V as default};
