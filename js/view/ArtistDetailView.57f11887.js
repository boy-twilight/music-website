import{x as a}from"../element-plus/element-plus.f4dce189.js";import{G as e,ax as s,r as t,Z as i,i as o,c as l,P as n,V as r,U as m,u as c,a as u,T as p,R as d,M as v,O as g,z as h,o as _,F as f,a7 as j,ay as y,az as x}from"../@vue/@vue.59fec093.js";import{b}from"../vue-router/vue-router.10a7fca4.js";import{g as w,a as L,b as R,S as z,x as E,e as T,d as C,T as S,U as k,V as O,W as A,y as D,i as I,j as P,C as G,P as M,t as U,_ as N}from"../../assets/index-831d6614.js";import{M as V}from"../index/index.d53b09ba.js";import{P as q,_ as F}from"../index.vue_vue_type_style_index_0_scoped_2dc764e5_lang/index.vue_vue_type_style_index_0_scoped_2dc764e5_lang.ce8305d1.js";import{A as B}from"../index/index.a6f5eda0.js";/* empty css                                                                                                                     */import{A as H}from"../index/index.25798000.js";import{O as K}from"../index/index.c5745a43.js";import{T as W}from"../Tab/Tab.63db5902.js";import{L as Z}from"../Loading/Loading.24f30fa2.js";import{_ as J}from"../NoSearch/NoSearch.4c67f0f6.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const Q={class:"artist-detail-container scroll-container"},X={class:"header"},Y=["src"],$={class:"right"},aa={class:"name"},ea={class:"info"},sa={key:0},ta=(a=>(y("data-v-a568a9ee"),a=a(),x(),a))((()=>u("p",{class:"job"},"职业：歌手、词曲创作者",-1))),ia={class:"fans"},oa={class:"header-operation"},la={class:"content"},na={class:"detail"},ra={class:"desc"},ma=N(e({__name:"ArtistDetailView",setup(e){s((a=>({"5102a4e0":c(y),"5121e3a8":c(x),"598a1296":c(ca),"611e4007":c(N),f63ff544:c(ma)})));const y=w().get("fontColor"),x=w().get("fontBlack"),N=w().get("shadow"),ma=w().get("themeColor"),ca=h("fontGray"),ua=L(),pa=b(),da=pa.query.id+"",va=pa.query.score+"",ga=t(!1),ha=h("firstLoading"),_a=i([!1,!1]),fa=i({name:"",score:va,id:da,avatar:"",alias:[]}),ja=i([]),ya=i([]),xa=o((()=>new Map(ya.map(((a,e)=>[a.id,e]))))),ba=t(1),wa=t(30),La=o((()=>ya.slice((ba.value-1)*wa.value,ba.value*wa.value))),Ra=o((()=>ya.length)),za=a=>{ba.value=a},Ea=i([]),Ta=i([]),Ca=t(!1),Sa=a=>{Ca.value=a},ka=a=>{Ca.value=a},Oa=()=>{U("我有一个宝藏歌手推荐给你："+fa.name+"，地址：https://www.liyinchao.cloud/#"+pa.fullPath)},Aa=a=>{"album"==a&&0==Ta.length?R((async()=>{try{const a=await z(da),{hotAlbums:e}=a;e.forEach((a=>{const{picUrl:e,name:s,publishTime:t}=a;Ta.push({name:s,id:a.id,cover:e,publishTime:E(t),artistId:da+""})}))}catch(a){T(C.ERROR,a.message)}setTimeout((()=>{_a[0]=0==Ta.length,ga.value=!1}),500)}),ga):"mv"==a&&0==Ea.length?R((async()=>{try{const a=await S(da),{mvs:e}=a;e.forEach((a=>{const{id:e,name:s,artistName:t,imgurl16v9:i,playCount:o}=a;Ea.push({id:e,name:s,artist:t,image:i,playCount:o})}))}catch(a){T(C.ERROR,a.message)}setTimeout((()=>{_a[1]=0==Ea.length,ga.value=!1}),500)}),ga):"detail"==a&&0==ja.length&&R((async()=>{try{const a=await k(da),{introduction:e}=a;e.forEach((a=>{ja.push({title:a.ti,content:a.txt})}))}catch(a){T(C.ERROR,a.message)}setTimeout((()=>{ga.value=!1}),500)}),ga)};return R((async()=>{try{const a=await O(da),{artist:e}=a,{name:s,alias:t,picUrl:i,briefDesc:o}=e;fa.name=s,fa.alias=t,fa.avatar=i,fa.briefDesc=o,ua.initLoveStatus(fa,ua.loveSingerId)}catch(a){T(C.ERROR,a.message)}try{const a=await A(da,1e3),{songs:e}=a,s=e.map((a=>a.id)).join(","),t=await D(s),{songs:i}=t;i.forEach((a=>{I([],ya,a)})),ua.initLoveMusic(ya),P(s,ya)}catch(a){T(C.ERROR,a.message)}ha.value=!1}),ha),(e,s)=>{var t,i;const o=a;return _(),l("div",Q,[n(m(c(K),{songs:c(La),"song-id-mapper":c(xa),onCloseSelect:Sa},null,8,["songs","song-id-mapper"]),[[r,Ca.value]]),n(u("div",X,[u("img",{src:fa.avatar,class:"left"},null,8,Y),u("div",$,[u("h4",aa,p(fa.name),1),u("div",ea,[0!=(null==(t=fa.alias)?void 0:t.length)?(_(),l("p",sa," 英文名："+p(null==(i=fa.alias)?void 0:i.join("、")),1)):d("",!0),ta]),u("span",ia,"粉丝数："+p(fa.score),1),u("div",oa,[m(c(q),{songs:c(La)},null,8,["songs"]),m(c(G),{name:fa.isLove?"取消关注":"关注",icon:fa.isLove?"":"","icon-style":fa.isLove?"color:#ff6a6a;":"",onClick:s[0]||(s[0]=a=>c(ua).addLove(fa,c(ua).loveSinger,c(ua).loveSingerId))},null,8,["name","icon","icon-style"]),Ca.value?d("",!0):(_(),v(c(V),{key:0,"share-to":Oa,onOpenSelect:ka}))])])],512),[[r,!Ca.value]]),n(u("div",la,[m(W,{active:"hot",onGetActive:Aa},{content:g((()=>[m(o,{label:"精选",name:"hot"},{default:g((()=>[m(c(F),{songs:c(La),"page-size":wa.value,"song-id-mapper":c(xa)},null,8,["songs","page-size","song-id-mapper"]),n(m(M,{"cur-page":ba.value,"page-size":wa.value,total:c(Ra),onPageChange:za},null,8,["cur-page","page-size","total"]),[[r,wa.value<c(Ra)]])])),_:1}),m(o,{label:"专辑",name:"album"},{default:g((()=>[n(m(J,{text:"歌手暂无专辑",size:280},null,512),[[r,_a[0]]]),m(Z,{isLoading:ga.value},null,8,["isLoading"]),n(m(c(B),{albums:Ta,"show-pagination":!0},null,8,["albums"]),[[r,!_a[0]]])])),_:1}),m(o,{label:"视频",name:"mv"},{default:g((()=>[n(m(J,{text:"歌手暂无视频",size:280},null,512),[[r,_a[1]]]),m(Z,{isLoading:ga.value},null,8,["isLoading"]),n(m(c(H),{mvs:Ea,"show-pagination":!0},null,8,["mvs"]),[[r,!_a[1]]])])),_:1}),m(o,{label:"详情",name:"detail"},{default:g((()=>[m(Z,{isLoading:ga.value},null,8,["isLoading"]),u("div",na,[u("p",ra,p(fa.briefDesc),1),(_(!0),l(f,null,j(ja,(a=>n((_(),l("div",{key:a.title},[u("h4",null,p(a.title),1),u("p",null,p(a.content),1)])),[[r,ja.length>0]]))),128))])])),_:1})])),_:1})],512),[[r,!Ca.value]])])}}}),[["__scopeId","data-v-a568a9ee"]]);export{ma as default};
