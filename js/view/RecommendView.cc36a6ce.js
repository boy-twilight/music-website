import{_ as e,g as t,u as a,a as s,b as l,e as n,c as o,d as i,f as u,h as c,i as r,j as d,k as p}from"../../static/index-a47c3a7a.js";/* empty css                                                                                                                     */import{A as V}from"../index/index.e9db409e.js";import{A as m}from"../index/index.1a5275e8.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../nprogress/nprogress.204a1a2a.js";import"../dplayer/dplayer.87601a3d.js";import"../lodash-es/lodash-es.8b477e85.js";/* empty css                                   */const v=["src"],f=e(Vue.defineComponent({__name:"index",props:{pictures:null,type:null,height:null,position:null},setup:e=>(Vue.useCssVars((t=>({"0a853d42":e.height}))),(t,a)=>{const s=Vue.resolveComponent("el-carousel-item"),l=Vue.resolveComponent("el-carousel");return Vue.openBlock(),Vue.createBlock(l,{height:e.height,type:e.type,"indicator-position":e.position,class:"carousel"},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.pictures,(e=>(Vue.openBlock(),Vue.createBlock(s,{key:e},{default:Vue.withCtx((()=>[Vue.createElementVNode("img",{src:e.pic},null,8,v)])),_:2},1024)))),128))])),_:1},8,["height","type","indicator-position"])})}),[["__scopeId","data-v-e3509aa2"]]),g=e=>(Vue.pushScopeId("data-v-61c78071"),e=e(),Vue.popScopeId(),e),h={class:"main-container"},y={class:"musiclist"},_=g((()=>Vue.createElementVNode("h4",{class:"title"},"推荐新音乐",-1))),k={class:"content"},E=["onClick"],C=[g((()=>Vue.createElementVNode("span",{class:"iconfont"},"",-1)))],N={class:"right"},j=e(Vue.defineComponent({__name:"RecommendView",setup(e){Vue.useCssVars((e=>({"53b64886":Vue.unref(v),"53d5874e":Vue.unref(g),"5fc46e34":Vue.unref(j),"597eeac9":Vue.unref(B),"5aff9cd1":Vue.unref(x)})));const v=t().get("fontColor"),g=t().get("fontBlack"),j=t().get("shadow"),x=t().get("themeColor"),B=Vue.inject("fontGray"),I=a(),{songList:b,current:R,isPlay:w,playProcess:L,playTime:F,songListId:P}=Pinia.storeToRefs(I),S=s(),U=Vue.reactive([]),O=Vue.reactive([]),T=Vue.reactive([]),A=Vue.reactive([]),D=Vue.inject("firstLoading");return l((async()=>{try{(await Promise.all([i(),u(10),c(40),r(10,"内地","全部","最新")])).forEach(((e,t)=>{if(0==t){const{banners:t}=e;t.forEach((e=>{const{imageUrl:t,targetId:a}=e;U.push({id:a,pic:t})}))}else if(1==t){const{playlists:t}=e;t.forEach((e=>{if(O.length<10){const{name:t,id:a,coverImgUrl:s,playCount:l,description:n,tags:o,creator:i}=e;O.push({name:t,id:a,playCount:l,description:n,image:s,tag:o,creator:{avatarUrl:i.avatarUrl,nickname:i.nickname}})}}))}else if(2==t){const{data:{list:t}}=e,a=[];for(let e of t){const{fee:t}=e.data;if(!(T.length<10))break;"0"!=t&&"8"!=t||d(a,T,e.data)}p(a.join(","),T)}else{const{data:t}=e;t.forEach((e=>{const{id:t,name:a,cover:s,playCount:l,artistName:n}=e;A.push({id:t,name:a,image:s,playCount:l,artist:n})}))}}))}catch(e){n(o.ERROR,e.message)}D.value=!1}),D),(e,t)=>{const a=Vue.resolveComponent("el-image");return Vue.openBlock(),Vue.createElementBlock("div",h,[Vue.createVNode(Vue.unref(f),{pictures:U.slice(0,5),type:"card",height:"230px"},null,8,["pictures"]),Vue.createVNode(Vue.unref(V),{title:"你的歌单补给站",playlists:O},null,8,["playlists"]),Vue.createElementVNode("div",y,[_,Vue.createElementVNode("div",k,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(T,(e=>(Vue.openBlock(),Vue.createElementBlock("div",{key:e.id,class:"song-recommend"},[Vue.createElementVNode("div",{onClick:t=>(async e=>{if("0"==e.available||"8"==e.available){const t=P.value.get(e.id);null==t?(S.addRecord(e,S.songRecord,S.loveMusicId),0==R.value?(w&&(w.value=!1),L.value=0,F.value=0,b.value.unshift(e),await Vue.nextTick(),w.value=!0):(b.value.unshift(e),R.value=0)):R.value!=t?R.value=t:w.value=!0}else"1"==e.available?n(o.INFO,"此歌曲为vip专属"):"10"==e.available&&n(o.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")})(e),class:"mask"},C,8,E),Vue.createVNode(a,{src:e.songImage,loading:"lazy",class:"left"},null,8,["src"]),Vue.createElementVNode("div",N,[Vue.createElementVNode("p",null,Vue.toDisplayString(e.name),1),Vue.createElementVNode("p",null,Vue.toDisplayString(e.singer),1)])])))),128))])]),Vue.createVNode(Vue.unref(m),{title:"最新mv",mvs:A,class:"mv-list"},null,8,["mvs"])])}}}),[["__scopeId","data-v-61c78071"]]);export{j as default};
