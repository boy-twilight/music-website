import{u as s,w as a,j as e}from"../element-plus/element-plus.85c7c360.js";import{G as t,ax as i,o as l,M as o,O as n,c as r,a7 as c,a as p,F as u,Z as m,U as d,u as v,z as f,T as g,ay as h,az as y,n as j}from"../@vue/@vue.59fec093.js";import{s as _}from"../pinia/pinia.81428a33.js";import{_ as x,g as k,u as b,a as C,b as I,c as w,d as z,e as R,f as E,h as U,i as O,j as A,k as F}from"../../assets/index-116bc366.js";/* empty css                                                                                                                     */import{A as L}from"../index/index.b4ed238e.js";import{A as N}from"../index/index.206a1636.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../vue-router/vue-router.10a7fca4.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const P=["src"],B=x(t({__name:"index",props:{pictures:null,type:null,height:null,position:null},setup:e=>(i((s=>({"0a853d42":e.height}))),(t,i)=>{const m=s,d=a;return l(),o(d,{height:e.height,type:e.type,"indicator-position":e.position,class:"carousel"},{default:n((()=>[(l(!0),r(u,null,c(e.pictures,(s=>(l(),o(m,{key:s},{default:n((()=>[p("img",{src:s.pic},null,8,P)])),_:2},1024)))),128))])),_:1},8,["height","type","indicator-position"])})}),[["__scopeId","data-v-e3509aa2"]]),G=s=>(h("data-v-ec5a43bf"),s=s(),y(),s),M={class:"main-container"},T={class:"musiclist"},V=G((()=>p("h4",{class:"title"},"推荐新音乐",-1))),Z={class:"content"},q=["onClick"],D=[G((()=>p("span",{class:"iconfont"},"",-1)))],H={class:"right"},J=x(t({__name:"RecommendView",setup(s){i((s=>({e121905e:v(a),e140cf26:v(t),"190eca48":v(o),"362ebc35":v(h),"69fe7986":v(n)})));const a=k().get("fontColor"),t=k().get("fontBlack"),o=k().get("shadow"),n=k().get("themeColor"),h=f("fontGray"),y=b(),{songList:x,current:P,isPlay:G,playProcess:J,playTime:K,songListId:Q}=_(y),S=C(),W=m([]),X=m([]),Y=m([]),$=m([]),ss=f("firstLoading");return I((async()=>{try{(await Promise.all([w(),z(10),R(40),E(10,"内地","全部","最新")])).forEach(((s,a)=>{if(0==a){const{banners:a}=s;a.forEach((s=>{const{imageUrl:a,targetId:e}=s;W.push({id:e,pic:a})}))}else if(1==a){const{playlists:a}=s;a.forEach((s=>{if(X.length<10){const{name:a,id:e,coverImgUrl:t,playCount:i,description:l,tags:o,creator:n}=s;X.push({name:a,id:e,playCount:i,description:l,image:t,tag:o,creator:{avatarUrl:n.avatarUrl,nickname:n.nickname}})}}))}else if(2==a){const{data:{list:a}}=s,e=[];for(let s of a){const{fee:a}=s.data;if(!(Y.length<10))break;"0"!=a&&"8"!=a||U(e,Y,s.data)}O(e.join(","),Y)}else{const{data:a}=s;a.forEach((s=>{const{id:a,name:e,cover:t,playCount:i,artistName:l}=s;$.push({id:a,name:e,image:t,playCount:i,artist:l})}))}}))}catch(s){A(F.ERROR,s.message)}ss.value=!1}),ss),(s,a)=>{const t=e;return l(),r("div",M,[d(v(B),{pictures:W.slice(0,5),type:"card",height:"230px"},null,8,["pictures"]),d(v(L),{title:"你的歌单补给站",playlists:X},null,8,["playlists"]),p("div",T,[V,p("div",Z,[(l(!0),r(u,null,c(Y,(s=>(l(),r("div",{key:s.id,class:"song-recommend"},[p("div",{onClick:a=>(async s=>{if("0"==s.available||"8"==s.available){const a=Q.value.get(s.id);null==a?(S.addRecord(s,S.songRecord,S.loveMusicId),0==P.value?(G&&(G.value=!1),J.value=0,K.value=0,x.value.unshift(s),await j(),G.value=!0):(x.value.unshift(s),P.value=0)):P.value!=a?P.value=a:G.value=!0}else"1"==s.available?A(F.INFO,"此歌曲为vip专属"):"10"==s.available&&A(F.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")})(s),class:"mask"},D,8,q),d(t,{src:s.songImage,loading:"lazy",class:"left"},null,8,["src"]),p("div",H,[p("p",null,g(s.name),1),p("p",null,g(s.singer),1)])])))),128))])]),d(v(N),{title:"最新mv",mvs:$,class:"mv-list"},null,8,["mvs"])])}}}),[["__scopeId","data-v-ec5a43bf"]]);export{J as default};
