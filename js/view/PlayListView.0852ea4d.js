import{x as e,h as a,y as s}from"../element-plus/element-plus.79622da4.js";import{G as t,ax as o,Z as l,d as i,i as n,M as r,O as c,u as m,o as p,a as u,P as d,V as v,U as g,T as f,c as y,a7 as h,F as _,R as j,z as x}from"../@vue/@vue.7ad02ad1.js";import{b}from"../vue-router/vue-router.53ff932e.js";import{u as k,h as w,O as U,i as L,j as P,k as z,e as R,f as C,l as S,m as I,M as E,n as O,o as M,p as q,s as G,C as B,P as F,S as H,q as T,r as V,_ as $}from"../../static/index-b302a22d.js";import{O as J}from"../index/index.08c04c55.js";import{M as K}from"../index/index.4f4557e0.js";import{P as N,_ as Z}from"../index.vue_vue_type_style_index_0_scoped_b3813f91_lang/index.vue_vue_type_style_index_0_scoped_b3813f91_lang.b69fb170.js";/* empty css                                                                                                                     */import{N as A}from"../index/index.37793095.js";import{T as D}from"../index/index.c4315259.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";const Q={class:"playlist-container scroll-container"},W={class:"header"},X=["src"],Y={class:"right"},ee={class:"title"},ae={class:"creator"},se={class:"creator-name"},te={class:"tag"},oe={class:"description"},le={class:"header-operation"},ie=$(t({__name:"PlayListView",setup(t){o((e=>({"2fe6f89d":m($),"2fd75939":m(ie),"8cf2e9d8":m(ne),"2295b1e9":m(re)})));const{fontColor:$,fontBlack:ie,boxShadow:ne,fontGray:re,contentHeight:ce}=k(),me=w(),pe=b(),ue=pe.query.id+"",de=pe.query.type+"",ve=l({id:ue,name:"",image:"",playCount:"",tag:[],description:"",creator:{nickname:"",avatarUrl:""}}),ge=l([]),fe=l([]),ye=i(1),he=i(U),_e=n((()=>ge.slice((ye.value-1)*he.value,ye.value*he.value))),je=n((()=>ge.length)),xe=x("firstLoading"),be=i(!1),ke=i(),we=i(!0),Ue=()=>{T("我有一个精品歌单分享给你："+ve.name+"，地址：https://www.liyinchao.cloud"+pe.fullPath)},Le=()=>{"playlist"==de?me.addLove(ve,me.lovePlaylist,me.lovePlaylistId):me.addLove(ve,me.loveRadio,me.loveRadioId)};return(async()=>{if(xe.value=!0,"playlist"==de)try{(await Promise.all([L(ue),P(ue),z(ue,100)])).forEach(((e,a)=>{if(0==a){const{playlist:{name:a,coverImgUrl:s,description:t,tags:o,creator:l,playCount:i}}=e;ve.name=a,ve.image=s,ve.description=t,ve.tag=o,ve.creator.avatarUrl=l.avatarUrl,ve.creator.nickname=l.nickname,ve.playCount=i,me.initLoveStatus(ve,me.lovePlaylistId)}else if(1==a){const{songs:a}=e;a.forEach((e=>{R(ge,e)})),me.initLoveMusic(ge),C(ge)}else if(2==a){const{comments:a,hotComments:s}=e;S(s,fe),S(a,fe),we.value=0==fe.length}}))}catch(e){I(E.ERROR,e.message)}else try{(await Promise.all([O(ue),M(ue,100)])).forEach(((e,a)=>{if(0==a){const{data:{name:a,dj:{avatarUrl:s,nickname:t},picUrl:o,desc:l,subCount:i}}=e;ve.name=a,ve.id=ue,ve.description=l,ve.image=o,ve.playCount=i,ve.creator.nickname=t,ve.creator.avatarUrl=s,me.initLoveStatus(ve,me.loveRadioId)}else if(1==a){const{programs:a}=e;a.forEach((e=>{const{mainSong:{name:a,id:s,fee:t,artists:o,album:{name:l,picUrl:i},duration:n}}=e;ge.push({id:s,name:a,singer:o[0].name,songImage:i,album:l,available:t,time:n})})),me.initLoveMusic(ge),C(ge)}})),q(ue,"7",fe,(()=>{we.value=0==fe.length}))}catch(e){I(E.ERROR,e.message)}await G(V),xe.value=!1})(),(t,o)=>{const l=a,i=s,n=e;return p(),r(n,{"max-height":m(ce)},{default:c((()=>[u("div",Q,[d(g(m(J),{songs:m(_e),"show-select":be.value,"onUpdate:showSelect":o[0]||(o[0]=e=>be.value=e),ref_key:"batch",ref:ke},null,8,["songs","show-select"]),[[v,be.value]]),d(u("div",W,[u("img",{src:ve.image,class:"left-image"},null,8,X),u("div",Y,[u("p",ee,f(ve.name),1),u("div",ae,[g(l,{src:ve.creator.avatarUrl},null,8,["src"]),u("span",se,f(ve.creator.nickname),1),u("div",te,[(p(!0),y(_,null,h(ve.tag,(e=>(p(),y("span",{key:e},"#"+f(e),1)))),128))])]),u("p",oe,f(ve.description),1),u("div",le,[g(m(N),{songs:m(_e)},null,8,["songs"]),g(m(B),{name:ve.isLove?"取消收藏":"收藏",icon:ve.isLove?"":"","icon-style":ve.isLove?"color:#ff6a6a;":"",onClick:Le},null,8,["name","icon","icon-style"]),be.value?j("",!0):(p(),r(m(K),{key:0,onShare:Ue,onOpenSelect:o[1]||(o[1]=e=>{var a;return null==(a=ke.value)?void 0:a.openSelectBox()})}))])])],512),[[v,!be.value]]),d(g(m(D),{active:"song",class:"playlist-tab"},{content:c((()=>[g(i,{label:`歌曲 ${ge.length}`,name:"song"},{default:c((()=>[g(m(Z),{songs:m(_e),"page-size":he.value},null,8,["songs","page-size"]),d(g(m(F),{"cur-page":ye.value,"onUpdate:curPage":o[2]||(o[2]=e=>ye.value=e),"page-size":he.value,total:m(je)},null,8,["cur-page","page-size","total"]),[[v,he.value<m(je)]])])),_:1},8,["label"]),g(i,{label:`评论 ${fe.length<10?fe.length+10:fe.length}`,name:"comment"},{default:c((()=>[d(g(m(H),{comments:fe},null,8,["comments"]),[[v,!we.value]]),d(g(m(A),{size:280,text:"暂无评论数据"},null,512),[[v,we.value]])])),_:1},8,["label"])])),_:1},512),[[v,!be.value]])])])),_:1},8,["max-height"])}}}),[["__scopeId","data-v-1cd90fbf"]]);export{ie as default};
