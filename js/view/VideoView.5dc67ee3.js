import{y as e}from"../element-plus/element-plus.70abbed3.js";import{G as a,ax as s,Z as t,d as l,i,P as o,c as n,U as u,u as r,a as v,S as c,V as p,o as d,ay as m,az as y,z as _,n as h}from"../@vue/@vue.7ad02ad1.js";import{u as j,g as f,e as g,m as x,i as w,_ as b}from"../../static/index-2f749c7f.js";/* empty css                                                                                                                     */import{A as C}from"../index/index.9725e440.js";import{B as S}from"../index/index.51a828a4.js";import{S as z}from"../index/index.836c8637.js";import{L as E}from"../index/index.75ccb6ed.js";/* empty css                                                                                                                     */import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../vue-router/vue-router.53ff932e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";const G=e=>(m("data-v-ce9b4771"),e=e(),y(),e),R=["infinite-scroll-disabled"],V=G((()=>v("h4",{class:"title video-choice"},"视频类型",-1))),k=G((()=>v("h4",{class:"title all"},"全部视频",-1))),A=G((()=>v("span",{class:"iconfont"},"",-1))),N=b(a({__name:"VideoView",setup(a){s((e=>({f89a6454:r(m),f8b9a31c:r(b),"35cdd190":r(N),"0d52604d":r(y),"5f2fedd8":r(G)})));const{fontColor:m,boxShadow:y,fontBlack:b,themeColor:G,fontGray:N}=j(),O=_("hideScrollbar"),B=t(["全部","韩国","日本","欧美","港台","内地"]),I=t(["全部","官方版","现场版","网易出品"]),L=t(["上升最快","最新","最热"]),M=l(0),P=l(0),U=l(0),T=t(new Map),Z=t(new Map);let q=t([]),D=t([]);const F=l(600),H=l(30),J=l(!1),K=l(!1),Q=_("firstLoading"),W=l(!1),X=i((()=>D.filter((e=>e.name.includes(Y.value)||e.artist.includes(Y.value))))),Y=l(""),$=e=>{Y.value=e},ee=async(e,a)=>{Z.set(M.value+""+P.value+U.value,F.value),O(),q.splice(0),D.splice(0),"视频地区"==a?M.value=e:"视频来源"==a?P.value=e:U.value=e,H.value=40;const s=Z.get(M.value+""+P.value+U.value);F.value=s||1500,await h();const t=T.get(M.value+""+P.value+U.value);t?(q.push(...t),D.push(...t.slice(0,H.value))):te()},ae=()=>{Y.value||(J.value=!0,H.value+=10,H.value<q.length?setTimeout((()=>{D.push(...q.slice(D.length,H.value)),J.value=!1}),100):F.value==q.length?(F.value*=2,W.value=!0):(D.push(...q.slice(D.length)),x(w.SUCCESS,"已经到达底部！")))},se=()=>{W.value=!1,f((async()=>{try{const e=await g(F.value,B[M.value],I[P.value],L[U.value]),{data:a}=e;a.slice(q.length).forEach((e=>{const{id:a,name:s,cover:t,playCount:l,artistName:i}=e;q.push({id:a,name:s,image:t,playCount:l,artist:i})})),T.set(M.value+""+P.value+U.value,[...q]),D.push(...q.slice(D.length,H.value))}catch(e){x(w.ERROR,e.message)}K.value=!1,J.value=!1}),K)},te=()=>{f((async()=>{try{const e=await g(F.value,B[M.value],I[P.value],L[U.value]),{data:a}=e;a.forEach((e=>{const{id:a,name:s,cover:t,playCount:l,artistName:i}=e;q.push({id:a,name:s,image:t,playCount:l,artist:i})})),T.set(M.value+""+P.value+U.value,[...q]),D.push(...q.slice(0,H.value))}catch(e){x(w.ERROR,e.message)}Q.value=!1}),Q)};return te(),(a,s)=>{const t=e;return o((d(),n("div",{class:"rvideo-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":J.value,style:{overflow:"auto"}},[u(r(z),{onGetContent:$}),V,u(r(S),{onGetActive:ee,title:"视频地区",activeValue:0,"show-title":!1,type:B,class:"area"},null,8,["type"]),u(r(S),{onGetActive:ee,title:"视频来源",activeValue:0,"show-title":!1,type:I},null,8,["type"]),u(r(S),{onGetActive:ee,title:"视频排序","show-title":!1,activeValue:0,type:L},null,8,["type"]),k,u(r(C),{mvs:r(X)},null,8,["mvs"]),u(r(E),{"is-loading":K.value},null,8,["is-loading"]),o(v("button",{class:"more-video",onClick:se},[c(" 更多精彩视频"),A],512),[[p,W.value]])],8,R)),[[t,ae]])}}}),[["__scopeId","data-v-ce9b4771"]]);export{N as default};
