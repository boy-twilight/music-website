import{x as e,h as a}from"../element-plus/element-plus.79622da4.js";import{G as s,ax as o,d as t,Z as i,i as l,y as n,M as r,O as c,u as d,o as m,a as u,U as p,P as v,V as y,c as h,a7 as f,S as _,F as j,W as g,T as x,z as b,n as k,aq as C,ay as w,az as V}from"../@vue/@vue.7ad02ad1.js";import{b as z,u as R}from"../vue-router/vue-router.53ff932e.js";import{u as S,h as T,y as E,z as I,A as q,x as L,m as N,M as O,B as P,D as A,E as D,n as F,C as U,S as Z,o as B,_ as G}from"../../static/index-3843a64e.js";import{D as H}from"../dplayer/dplayer.beff636d.js";/* empty css                                                                                                                     */import{A as M}from"../index/index.469a2775.js";/* empty css                                                                                                                     */import{N as J}from"../index/index.25024e59.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";const W=e=>(w("data-v-fbb13dfd"),e=e(),V(),e),K={class:"video-container scroll-container"},Q={class:"players-container"},X={class:"recommend-container"},Y={class:"content"},$={class:"mask"},ee=["onClick"],ae=W((()=>u("div",{class:"players"},null,-1))),se={class:"detail"},oe={class:"title"},te={class:"artist-info"},ie={class:"operation"},le={class:"comment-area"},ne=W((()=>u("h4",{class:"title"},"全部评论",-1))),re=W((()=>u("span",{class:"iconfont_1"}," ",-1))),ce=G(s({__name:"VideoPlayView",setup(s){o((e=>({"6600a104":d(w),"65f101a0":d(V),"4bfc3ebc":d(ce),"70b0b232":d(de),"20bf990a":d(G),"72c6ff2c":d(W)})));const{fontColor:w,fontBlack:V,boxShadow:G,themeColor:W,fontGray:ce,videoHeight:de,contentHeight:me}=S(),ue=T(),pe=t(),ve=z(),ye=R(),he=ve.query.id+"",fe=i({id:he,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),_e=i([]),je=l((()=>[fe,..._e])),ge=b("firstLoading"),xe=t(!1),be=i([]),ke=t(!1),Ce=l((()=>0==be.length)),we=()=>{B("我在https://www.liyinchao.cloud"+ve.fullPath+"观看"+fe.name+",快来和我一起观看把！")};n((()=>{var e;document.querySelector(".dplayer-video").onended=null,null==(e=pe.value)||e.destroy()}));return(async()=>{ge.value=!0;const e=/.*[A-Z]+.*/;if(e.test(he))try{(await Promise.all([P(he),A(he),D(he)])).forEach(((e,a)=>{if(0==a){const{data:{title:a,coverUrl:s,publishTime:o,playTime:t,creator:i}}=e;fe.name=a,fe.image=s,fe.playCount=t,fe.publishTime=L(o),fe.artist=i.nickname}else if(1==a){const{urls:a}=e;a?fe.url=a[0].url:N(O.INFO,"此视频暂无播放资源，请切换下一个。")}else if(2==a){const{data:a}=e;a.forEach((e=>{const{title:a,coverUrl:s,vid:o,playTime:t,creator:i}=e;_e.push({id:o,name:a,image:s,playCount:t,artist:i[0].userName})}))}}))}catch(s){N(O.ERROR,s.message)}else try{(await Promise.all([E(he),I(he),q(he)])).forEach(((e,a)=>{if(0==a){const{data:{name:a,artistName:s,cover:o,playCount:t,duration:i,publishTime:l}}=e;fe.name=a,fe.playCount=t,fe.image=o,fe.artist=s,fe.time=i,fe.publishTime=L(l)}else if(1==a){const{data:{url:a,fee:s}}=e;a?(fe.url=a,fe.available=s):N(O.INFO,"此视频暂无播放资源，请切换下一个。")}else if(2==a){const{mvs:a}=e;a&&a.forEach((e=>{const{id:a,cover:s,name:o,artistName:t,playCount:i}=e;_e.push({id:a,image:s,name:o,artist:t,playCount:i})}))}}))}catch(s){N(O.ERROR,s.message)}ue.addRecord(fe,ue.videoRecord,ue.videoRecordId),ue.initLoveStatus(fe,ue.loveVideoId),(async()=>{await k(),pe.value=new H({container:document.querySelector(".players"),video:{url:fe.url,thumbnails:fe.image,type:"video/mp4",pic:fe.image},autoplay:!1,loop:!1,hotkey:!0,theme:null==W?void 0:W.value,chromecast:!0,lang:"zh-cn",screenshot:!0,preload:"auto",volume:.9,playbackSpeed:[.75,1,1.25,1.5,1.75,2],contextmenu:[{text:"下载",click:()=>{ue.addVideoDownload(fe)}},{text:"收藏",click:()=>{ue.addLove(fe,ue.loveVideo,ue.loveVideoId)}},{text:"分享",click:()=>{we()}}]}),document.querySelector(".dplayer-video").onended=()=>{xe.value=!0}})(),ge.value=!1;const a=e.test(he)?"5":"1";F(he,a,be)})(),(s,o)=>{const t=a,i=e,l=C("prevent");return m(),r(i,{"max-height":d(me)},{default:c((()=>[u("div",K,[u("div",Q,[p(g,{name:"show"},{default:c((()=>[v(u("div",X,[v(u("h4",null,"相关推荐",512),[[y,d(je).length>1]]),u("div",Y,[(m(!0),h(j,null,f(d(je),((e,a)=>(m(),h("div",{class:"recommend-video",key:e.id},[p(t,{src:e.image,class:"image"},null,8,["src"]),u("div",$,[v((m(),h("span",{class:"iconfont play",onClick:s=>((e,a)=>{0==e?(xe.value=!1,document.querySelector(".dplayer-video").play()):ye.push({name:"video",query:{id:a}})})(a,e.id)},[_("")],8,ee)),[[l]])])])))),128))])],512),[[y,xe.value]])])),_:1}),ae]),u("div",se,[u("p",oe,x(fe.name),1),u("div",te,[u("span",null,x(/.*[A-Z]+.*/.test(he)?"创作者："+fe.artist:"演唱："+fe.artist),1),u("span",null,x(fe.playCount)+"次观看",1),u("span",null,"发布时间："+x(fe.publishTime),1)]),v(u("div",ie,[p(d(U),{name:fe.isLove?"取消收藏":"收藏",icon:fe.isLove?"":"","icon-style":fe.isLove?"color:#ff6a6a;":"",onClick:o[0]||(o[0]=e=>d(ue).addLove(fe,d(ue).loveVideo,d(ue).loveVideoId)),class:"operate"},null,8,["name","icon","icon-style"]),p(d(U),{name:"下载",onClick:o[1]||(o[1]=e=>d(ue).addVideoDownload(fe)),icon:"",class:"operate"}),p(d(U),{name:"分享",icon:"",onClick:we,class:"operate"}),p(d(U),{name:"评论",icon:"",onClick:o[2]||(o[2]=e=>ke.value=!0),class:"operate"})],512),[[y,!ke.value]])]),v(p(d(M),{mvs:_e,title:"相关推荐"},null,8,["mvs"]),[[y,!ke.value&&_e.length>0]]),v(u("div",le,[ne,u("button",{class:"exit",onClick:o[3]||(o[3]=e=>ke.value=!1)},[re,_(" 退出 ")]),v(p(d(Z),{comments:be},null,8,["comments"]),[[y,!d(Ce)]]),v(p(d(J),{size:280,text:"暂无评论数据"},null,512),[[y,d(Ce)]])],512),[[y,ke.value]])])])),_:1},8,["max-height"])}}}),[["__scopeId","data-v-fbb13dfd"]]);export{ce as default};
