import{x as e}from"../element-plus/element-plus.85c7c360.js";import{G as a,ax as s,r as i,Z as t,i as n,c as l,P as o,V as r,U as d,u as c,a as m,T as u,R as p,M as v,O as g,z as _,o as h,F as f,a7 as j,ay as y,az as x}from"../@vue/@vue.59fec093.js";import{b}from"../vue-router/vue-router.10a7fca4.js";import{g as w,a as R,b as L,R as z,w as E,e as C,d as k,T as O,U as T,V as A,W as S,x as D,i as I,j as P,C as G,P as M,s as U,_ as V}from"../../assets/index-ae815df4.js";import{M as q}from"../index/index.6ee020d6.js";import{P as F,_ as N}from"../index.vue_vue_type_style_index_0_scoped_2dc764e5_lang/index.vue_vue_type_style_index_0_scoped_2dc764e5_lang.17b6b6a5.js";import{A as B}from"../index/index.3e812a77.js";/* empty css                                                                                                                     */import{A as H}from"../index/index.a173b601.js";import{O as J}from"../index/index.0ee0497c.js";import{L as W}from"../index/index.78265425.js";import{N as Z}from"../index/index.0b25b9e3.js";import{T as K}from"../index/index.aebbf3a2.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";/* empty css                                                                                                                     */const Q={class:"artist-detail-container scroll-container"},X={class:"header"},Y=["src"],$={class:"right"},ee={class:"name"},ae={class:"info"},se={key:0},ie=(e=>(y("data-v-6b531ac2"),e=e(),x(),e))((()=>m("p",{class:"job"},"职业：歌手、词曲创作者",-1))),te={class:"fans"},ne={class:"header-operation"},le={class:"content"},oe={class:"detail"},re={class:"desc"},de=V(a({__name:"ArtistDetailView",setup(a){s((e=>({"55a08d96":c(y),"55bfcc5e":c(x),"17667e51":c(ce),"5ecf4bac":c(V),"3d506e59":c(de)})));const y=w().get("fontColor"),x=w().get("fontBlack"),V=w().get("shadow"),de=w().get("themeColor"),ce=_("fontGray"),me=R(),ue=b(),pe=ue.query.id+"",ve=ue.query.score+"",ge=i(!1),_e=_("firstLoading"),he=t([!1,!1]),fe=t({name:"",score:ve,id:pe,avatar:"",alias:[]}),je=t([]),ye=t([]),xe=n((()=>new Map(ye.map(((e,a)=>[e.id,a]))))),be=i(1),we=i(30),Re=n((()=>ye.length)),Le=n((()=>ye.slice((be.value-1)*we.value,be.value*we.value))),ze=t([]),Ee=t([]),Ce=i(!1),ke=e=>{be.value=e},Oe=e=>{Ce.value=e},Te=e=>{Ce.value=e},Ae=()=>{U("我有一个宝藏歌手推荐给你："+fe.name+"，地址：https://www.liyinchao.cloud/#"+ue.fullPath)},Se=e=>{"album"==e&&0==Ee.length?L((async()=>{try{const e=await z(pe),{hotAlbums:a}=e;a.forEach((e=>{const{picUrl:a,name:s,publishTime:i}=e;Ee.push({name:s,id:e.id,cover:a,publishTime:E(i),artistId:pe+""})}))}catch(e){C(k.ERROR,e.message)}setTimeout((()=>{he[0]=0==Ee.length,ge.value=!1}),500)}),ge):"mv"==e&&0==ze.length?L((async()=>{try{const e=await O(pe),{mvs:a}=e;a.forEach((e=>{const{id:a,name:s,artistName:i,imgurl16v9:t,playCount:n}=e;ze.push({id:a,name:s,artist:i,image:t,playCount:n})}))}catch(e){C(k.ERROR,e.message)}setTimeout((()=>{he[1]=0==ze.length,ge.value=!1}),500)}),ge):"detail"==e&&0==je.length&&L((async()=>{try{const e=await T(pe),{introduction:a}=e;a.forEach((e=>{je.push({title:e.ti,content:e.txt})}))}catch(e){C(k.ERROR,e.message)}setTimeout((()=>{ge.value=!1}),500)}),ge)};return L((async()=>{try{const e=await A(pe),{artist:a}=e,{name:s,alias:i,picUrl:t,briefDesc:n}=a;fe.name=s,fe.alias=i,fe.avatar=t,fe.briefDesc=n,me.initLoveStatus(fe,me.loveSingerId)}catch(e){C(k.ERROR,e.message)}try{const e=await S(pe,1e3),{songs:a}=e,s=a.map((e=>e.id)).join(","),i=await D(s),{songs:t}=i;t.forEach((e=>{I([],ye,e)})),me.initLoveMusic(ye),P(s,ye)}catch(e){C(k.ERROR,e.message)}_e.value=!1}),_e),(a,s)=>{var i,t;const n=e;return h(),l("div",Q,[o(d(c(J),{songs:c(Le),"song-id-mapper":c(xe),onCloseSelect:Oe},null,8,["songs","song-id-mapper"]),[[r,Ce.value]]),o(m("div",X,[m("img",{src:fe.avatar,class:"left"},null,8,Y),m("div",$,[m("h4",ee,u(fe.name),1),m("div",ae,[0!=(null==(i=fe.alias)?void 0:i.length)?(h(),l("p",se," 英文名："+u(null==(t=fe.alias)?void 0:t.join("、")),1)):p("",!0),ie]),m("span",te,"粉丝数："+u(fe.score),1),m("div",ne,[d(c(F),{songs:c(Le)},null,8,["songs"]),d(c(G),{name:fe.isLove?"取消关注":"关注",icon:fe.isLove?"":"","icon-style":fe.isLove?"color:#ff6a6a;":"",onClick:s[0]||(s[0]=e=>c(me).addLove(fe,c(me).loveSinger,c(me).loveSingerId))},null,8,["name","icon","icon-style"]),Ce.value?p("",!0):(h(),v(c(q),{key:0,"share-to":Ae,onOpenSelect:Te}))])])],512),[[r,!Ce.value]]),o(m("div",le,[d(c(K),{active:"hot",onGetActive:Se},{content:g((()=>[d(n,{label:"精选",name:"hot"},{default:g((()=>[d(c(N),{songs:c(Le),"page-size":we.value,"song-id-mapper":c(xe)},null,8,["songs","page-size","song-id-mapper"]),o(d(c(M),{"cur-page":be.value,"page-size":we.value,total:c(Re),onPageChange:ke},null,8,["cur-page","page-size","total"]),[[r,we.value<c(Re)]])])),_:1}),d(n,{label:"专辑",name:"album"},{default:g((()=>[o(d(c(Z),{text:"歌手暂无专辑",size:280},null,512),[[r,he[0]]]),d(c(W),{isLoading:ge.value},null,8,["isLoading"]),o(d(c(B),{albums:Ee,"show-pagination":!0},null,8,["albums"]),[[r,!he[0]]])])),_:1}),d(n,{label:"视频",name:"mv"},{default:g((()=>[o(d(c(Z),{text:"歌手暂无视频",size:280},null,512),[[r,he[1]]]),d(c(W),{isLoading:ge.value},null,8,["isLoading"]),o(d(c(H),{mvs:ze,"show-pagination":!0},null,8,["mvs"]),[[r,!he[1]]])])),_:1}),d(n,{label:"详情",name:"detail"},{default:g((()=>[d(c(W),{isLoading:ge.value},null,8,["isLoading"]),m("div",oe,[m("p",re,u(fe.briefDesc),1),(h(!0),l(f,null,j(je,(e=>o((h(),l("div",{key:e.title},[m("h4",null,u(e.title),1),m("p",null,u(e.content),1)])),[[r,je.length>0]]))),128))])])),_:1})])),_:1})],512),[[r,!Ce.value]])])}}}),[["__scopeId","data-v-6b531ac2"]]);export{de as default};
