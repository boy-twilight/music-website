import{x as e,h as a}from"../element-plus/element-plus.79622da4.js";import{G as s,ax as o,d as t,Z as i,i as l,y as n,M as r,O as c,u as d,o as m,a as u,U as p,P as v,V as y,c as h,a7 as _,S as f,F as j,W as g,T as x,z as k,n as C,aq as b,ay as w,az as V}from"../@vue/@vue.7ad02ad1.js";import{b as z,u as R}from"../vue-router/vue-router.53ff932e.js";import{u as S,h as T,y as E,z as I,A as q,x as L,m as N,M as O,B as P,D as A,E as D,n as F,C as U,S as Z,o as B,_ as G}from"../../static/index-512da842.js";import{D as H}from"../dplayer/dplayer.beff636d.js";/* empty css                                                                                                                     */import{A as M}from"../index/index.77e3a683.js";/* empty css                                                                                                                     */import{N as J}from"../index/index.25cb2651.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";const W=e=>(w("data-v-1edebefc"),e=e(),V(),e),K={class:"video-container scroll-container"},Q={class:"players-container"},X={class:"recommend-container"},Y={class:"content"},$={class:"mask"},ee=["onClick"],ae=W((()=>u("div",{class:"players"},null,-1))),se={class:"detail"},oe={class:"title"},te={class:"artist-info"},ie={class:"operation"},le={class:"comment-area"},ne=W((()=>u("h4",{class:"title"},"全部评论",-1))),re=W((()=>u("span",{class:"iconfont_1"}," ",-1))),ce=G(s({__name:"VideoPlayView",setup(s){o((e=>({"6c7519ae":d(w),"6c945876":d(V),56109446:d(ce),"12ece1d2":d(de),"536505a0":d(G),"491c1a36":d(W)})));const{fontColor:w,fontBlack:V,boxShadow:G,themeColor:W,fontGray:ce,videoHeight:de,contentHeight:me}=S(),ue=T(),pe=t(),ve=z(),ye=R(),he=ve.query.id+"",_e=i({id:he,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),fe=i([]),je=l((()=>[_e,...fe])),ge=k("firstLoading"),xe=t(!1),ke=i([]),Ce=t(!1),be=l((()=>0==ke.length)),we=()=>{B("我在https://www.liyinchao.cloud"+ve.fullPath+"观看"+_e.name+",快来和我一起观看把！")};n((()=>{var e;document.querySelector(".dplayer-video").onended=null,null==(e=pe.value)||e.destroy()}));return(async()=>{ge.value=!0;const e=/.*[A-Z]+.*/;if(e.test(he))try{(await Promise.all([P(he),A(he),D(he)])).forEach(((e,a)=>{if(0==a){const{data:{title:a,coverUrl:s,publishTime:o,playTime:t,creator:i}}=e;_e.name=a,_e.image=s,_e.playCount=t,_e.publishTime=L(o),_e.artist=i.nickname}else if(1==a){const{urls:a}=e;a?_e.url=a[0].url:N(O.INFO,"此视频暂无播放资源，请切换下一个。")}else if(2==a){const{data:a}=e;a.forEach((e=>{const{title:a,coverUrl:s,vid:o,playTime:t,creator:i}=e;fe.push({id:o,name:a,image:s,playCount:t,artist:i[0].userName})}))}}))}catch(s){N(O.ERROR,s.message)}else try{(await Promise.all([E(he),I(he),q(he)])).forEach(((e,a)=>{if(0==a){const{data:{name:a,artistName:s,cover:o,playCount:t,duration:i,publishTime:l}}=e;_e.name=a,_e.playCount=t,_e.image=o,_e.artist=s,_e.time=i,_e.publishTime=L(l)}else if(1==a){const{data:{url:a,fee:s}}=e;a?(_e.url=a,_e.available=s):N(O.INFO,"此视频暂无播放资源，请切换下一个。")}else if(2==a){const{mvs:a}=e;a&&a.forEach((e=>{const{id:a,cover:s,name:o,artistName:t,playCount:i}=e;fe.push({id:a,image:s,name:o,artist:t,playCount:i})}))}}))}catch(s){N(O.ERROR,s.message)}ue.addRecord(_e,ue.videoRecord,ue.videoRecordId),ue.initLoveStatus(_e,ue.loveVideoId),(async()=>{await C(),pe.value=new H({container:document.querySelector(".players"),video:{url:_e.url,thumbnails:_e.image,type:"video/mp4",pic:_e.image},autoplay:!1,loop:!1,hotkey:!0,theme:null==W?void 0:W.value,chromecast:!0,lang:"zh-cn",screenshot:!0,preload:"auto",volume:.9,playbackSpeed:[.75,1,1.25,1.5,1.75,2],contextmenu:[{text:"下载",click:()=>{ue.addVideoDownload(_e)}},{text:"收藏",click:()=>{ue.addLove(_e,ue.loveVideo,ue.loveVideoId)}},{text:"分享",click:()=>{we()}}]}),document.querySelector(".dplayer-video").onended=()=>{xe.value=!0}})(),ge.value=!1;const a=e.test(he)?"5":"1";F(he,a,ke)})(),(s,o)=>{const t=a,i=e,l=b("prevent");return m(),r(i,{"max-height":d(me)},{default:c((()=>[u("div",K,[u("div",Q,[p(g,{name:"show"},{default:c((()=>[v(u("div",X,[v(u("h4",null,"相关推荐",512),[[y,d(je).length>1]]),u("div",Y,[(m(!0),h(j,null,_(d(je),((e,a)=>(m(),h("div",{class:"recommend-video",key:e.id},[p(t,{src:e.image,class:"image"},null,8,["src"]),u("div",$,[v((m(),h("span",{class:"iconfont play",onClick:s=>((e,a)=>{0==e?(xe.value=!1,document.querySelector(".dplayer-video").play()):ye.push({name:"video",query:{id:a}})})(a,e.id)},[f("")],8,ee)),[[l]])])])))),128))])],512),[[y,xe.value]])])),_:1}),ae]),u("div",se,[u("p",oe,x(_e.name),1),u("div",te,[u("span",null,x(/.*[A-Z]+.*/.test(he)?"创作者："+_e.artist:"演唱："+_e.artist),1),u("span",null,x(_e.playCount)+"次观看",1),u("span",null,"发布时间："+x(_e.publishTime),1)]),v(u("div",ie,[p(d(U),{name:_e.isLove?"取消收藏":"收藏",icon:_e.isLove?"":"","icon-style":_e.isLove?"color:#ff6a6a;":"",onClick:o[0]||(o[0]=e=>d(ue).addLove(_e,d(ue).loveVideo,d(ue).loveVideoId)),class:"operate"},null,8,["name","icon","icon-style"]),p(d(U),{name:"下载",onClick:o[1]||(o[1]=e=>d(ue).addVideoDownload(_e)),icon:"",class:"operate"}),p(d(U),{name:"分享",icon:"",onClick:we,class:"operate"}),p(d(U),{name:"评论",icon:"",onClick:o[2]||(o[2]=e=>Ce.value=!0),class:"operate"})],512),[[y,!Ce.value]])]),v(p(d(M),{mvs:fe,title:"相关推荐"},null,8,["mvs"]),[[y,!Ce.value&&fe.length>0]]),v(u("div",le,[ne,u("button",{class:"exit",onClick:o[3]||(o[3]=e=>Ce.value=!1)},[re,f(" 退出 ")]),v(p(d(Z),{comments:ke},null,8,["comments"]),[[y,!d(be)]]),v(p(d(J),{size:280,text:"暂无评论数据"},null,512),[[y,d(be)]])],512),[[y,Ce.value]])])])),_:1},8,["max-height"])}}}),[["__scopeId","data-v-1edebefc"]]);export{ce as default};
