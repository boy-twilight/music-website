import{x as e}from"../element-plus/element-plus.70abbed3.js";import{G as a,ax as s,d as i,Z as t,i as l,c as o,P as n,V as r,U as d,u as m,a as c,T as p,R as u,M as v,O as g,o as _,F as h,a7 as f,ay as j,az as y,z as x}from"../@vue/@vue.7ad02ad1.js";import{b}from"../vue-router/vue-router.53ff932e.js";import{u as w,j as L,g as R,R as z,v as E,m as C,i as k,T as O,U as S,V as P,W as A,w as I,f as T,h as D,C as G,P as M,s as U,_ as N}from"../../static/index-93562299.js";import{M as V}from"../index/index.9cf3a0cf.js";import{P as q,_ as F}from"../index.vue_vue_type_style_index_0_scoped_841f6d57_lang/index.vue_vue_type_style_index_0_scoped_841f6d57_lang.b3772ae8.js";import{A as B}from"../index/index.3f7dfdf8.js";/* empty css                                                                                                                     */import{A as H}from"../index/index.1537881f.js";import{O as J}from"../index/index.923787ec.js";import{L as K}from"../index/index.0bc01097.js";import{N as W}from"../index/index.d7e13d9f.js";import{T as Z}from"../index/index.aa4e95c9.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.5953103e.js";import"../crypto-js/crypto-js.6e421324.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.787098c3.js";import"../lyc-storage/lyc-storage.12bb0aad.js";/* empty css                                                                                                                     */const Q={class:"artist-detail-container scroll-container"},X={class:"header"},Y=["src"],$={class:"right"},ee={class:"name"},ae={class:"info"},se={key:0},ie=(e=>(j("data-v-019923c6"),e=e(),y(),e))((()=>c("p",{class:"job"},"职业：歌手、词曲创作者",-1))),te={class:"fans"},le={class:"header-operation"},oe={class:"content"},ne={class:"detail"},re={class:"desc"},de=N(a({__name:"ArtistDetailView",setup(a){s((e=>({"56b2f7ae":m(j),"56d23676":m(y),"513084dd":m(me),"5e4616a0":m(N),"2cb301e5":m(de)})));const{fontColor:j,fontBlack:y,boxShadow:N,themeColor:de,fontGray:me}=w(),ce=L(),pe=b(),ue=pe.query.id+"",ve=pe.query.score+"",ge=i(!1),_e=x("firstLoading"),he=t([!1,!1]),fe=t({name:"",score:ve,id:ue,avatar:"",alias:[]}),je=t([]),ye=t([]),xe=l((()=>new Map(ye.map(((e,a)=>[e.id,a]))))),be=i(1),we=i(30),Le=l((()=>ye.length)),Re=l((()=>ye.slice((be.value-1)*we.value,be.value*we.value))),ze=t([]),Ee=t([]),Ce=i(!1),ke=e=>{be.value=e},Oe=e=>{Ce.value=e},Se=e=>{Ce.value=e},Pe=()=>{U("我有一个宝藏歌手推荐给你："+fe.name+"，地址：https://www.liyinchao.cloud"+pe.fullPath)},Ae=e=>{"album"==e&&0==Ee.length?R((async()=>{try{const e=await z(ue),{hotAlbums:a}=e;a.forEach((e=>{const{picUrl:a,name:s,publishTime:i}=e;Ee.push({name:s,id:e.id,cover:a,publishTime:E(i),artistId:ue+""})}))}catch(e){C(k.ERROR,e.message)}he[0]=0==Ee.length,ge.value=!1}),ge):"mv"==e&&0==ze.length?R((async()=>{try{const e=await O(ue),{mvs:a}=e;a.forEach((e=>{const{id:a,name:s,artistName:i,imgurl16v9:t,playCount:l}=e;ze.push({id:a,name:s,artist:i,image:t,playCount:l})}))}catch(e){C(k.ERROR,e.message)}he[1]=0==ze.length,ge.value=!1}),ge):"detail"==e&&0==je.length&&R((async()=>{try{const e=await S(ue),{introduction:a}=e;a.forEach((e=>{je.push({title:e.ti,content:e.txt})}))}catch(e){C(k.ERROR,e.message)}ge.value=!1}),ge)};return R((async()=>{try{(await Promise.all([P(ue),A(ue,1e3)])).forEach((async(e,a)=>{if(0==a){const{artist:a}=e,{name:s,alias:i,picUrl:t,briefDesc:l}=a;fe.name=s,fe.alias=i,fe.avatar=t,fe.briefDesc=l,ce.initLoveStatus(fe,ce.loveSingerId)}else if(1==a){const{songs:a}=e,s=a.map((e=>e.id)).join(","),i=await I(s),{songs:t}=i;t.forEach((e=>{T(ye,e)})),ce.initLoveMusic(ye),D(ye),_e.value=!1}}))}catch(e){C(k.ERROR,e.message)}}),_e),(a,s)=>{var i,t;const l=e;return _(),o("div",Q,[n(d(m(J),{songs:m(Re),"song-id-mapper":m(xe),onCloseSelect:Oe},null,8,["songs","song-id-mapper"]),[[r,Ce.value]]),n(c("div",X,[c("img",{src:fe.avatar,class:"left"},null,8,Y),c("div",$,[c("h4",ee,p(fe.name),1),c("div",ae,[0!=(null==(i=fe.alias)?void 0:i.length)?(_(),o("p",se," 英文名："+p(null==(t=fe.alias)?void 0:t.join("、")),1)):u("",!0),ie]),c("span",te,"粉丝数："+p(fe.score),1),c("div",le,[d(m(q),{songs:m(Re)},null,8,["songs"]),d(m(G),{name:fe.isLove?"取消关注":"关注",icon:fe.isLove?"":"","icon-style":fe.isLove?"color:#ff6a6a;":"",onClick:s[0]||(s[0]=e=>m(ce).addLove(fe,m(ce).loveSinger,m(ce).loveSingerId))},null,8,["name","icon","icon-style"]),Ce.value?u("",!0):(_(),v(m(V),{key:0,"share-to":Pe,onOpenSelect:Se}))])])],512),[[r,!Ce.value]]),n(c("div",oe,[d(m(Z),{active:"hot",onGetActive:Ae},{content:g((()=>[d(l,{label:"精选",name:"hot"},{default:g((()=>[d(m(F),{songs:m(Re),"page-size":we.value,"song-id-mapper":m(xe)},null,8,["songs","page-size","song-id-mapper"]),n(d(m(M),{"cur-page":be.value,"page-size":we.value,total:m(Le),onPageChange:ke},null,8,["cur-page","page-size","total"]),[[r,we.value<m(Le)]])])),_:1}),d(l,{label:"专辑",name:"album"},{default:g((()=>[n(d(m(W),{text:"歌手暂无专辑",size:280},null,512),[[r,he[0]]]),d(m(K),{isLoading:ge.value},null,8,["isLoading"]),n(d(m(B),{albums:Ee,"show-pagination":!0},null,8,["albums"]),[[r,!he[0]]])])),_:1}),d(l,{label:"视频",name:"mv"},{default:g((()=>[n(d(m(W),{text:"歌手暂无视频",size:280},null,512),[[r,he[1]]]),d(m(K),{isLoading:ge.value},null,8,["isLoading"]),n(d(m(H),{mvs:ze,"show-pagination":!0},null,8,["mvs"]),[[r,!he[1]]])])),_:1}),d(l,{label:"详情",name:"detail"},{default:g((()=>[d(m(K),{isLoading:ge.value},null,8,["isLoading"]),c("div",ne,[c("p",re,p(fe.briefDesc),1),(_(!0),o(h,null,f(je,(e=>n((_(),o("div",{key:e.title},[c("h4",null,p(e.title),1),c("p",null,p(e.content),1)])),[[r,je.length>0]]))),128))])])),_:1})])),_:1})],512),[[r,!Ce.value]])])}}}),[["__scopeId","data-v-019923c6"]]);export{de as default};
