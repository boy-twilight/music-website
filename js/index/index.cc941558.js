import{G as e,ax as a,u as l,Z as s,d as o,i as n,o as t,c as u,U as c,O as i,J as v,F as r,a7 as p,M as d,a as m,T as g,I as _,P as S,aq as f,ay as h,az as w,V as C}from"../@vue/@vue.7ad02ad1.js";import{s as y}from"../pinia/pinia.07d51cb2.js";import{u as x,_ as V,i as b,a3 as N,C as k,P,m as I,h as R,a as j}from"../../static/index-dbd2742a.js";import{P as U,_ as z}from"../index.vue_vue_type_style_index_0_scoped_f0a13ca2_lang/index.vue_vue_type_style_index_0_scoped_f0a13ca2_lang.150d85a2.js";import{b as B,c as D,d as L}from"../element-plus/element-plus.79622da4.js";import{S as M}from"./index.b8b2cb15.js";const E=e=>(h("data-v-ebd2a4de"),e=e(),w(),e),F={class:"sort-btn"},G=[E((()=>m("span",{class:"iconfont"},"",-1))),E((()=>m("span",null," 排序",-1)))],O=V(e({__name:"index",emits:["getSortChoice"],setup(e,{emit:h}){a((e=>({"40b0d3c2":l(w),"5f9e34b4":l(V),fc57a2a2:l(y)})));const{fontColor:w,background:C,themeColor:y,searchColor:V,dropDownMode:b}=x(),N=s(["歌曲排序","歌手排序","专辑排序","时长排序"]),k=s([!1,!1,!1,!1]),P=o(-1),I=n((()=>k.map(((e,a)=>a==P.value)))),R=e=>{"歌曲排序"==e?P.value=I.value[0]?-1:0:"歌手排序"==e?P.value=I.value[1]?-1:1:"专辑排序"==e?P.value=I.value[2]?-1:2:"时长排序"==e&&(P.value=I.value[3]?-1:3),-1==P.value?h("getSortChoice",I.value,!0):h("getSortChoice",I.value,!1)},j=()=>{-1==P.value&&(P.value=0,h("getSortChoice",I.value,!1))};return(e,a)=>{const s=B,o=D,n=L,h=f("prevent");return t(),u("div",F,[c(n,{trigger:"click",onCommand:R,"popper-class":`dropdown sort-drop ${l(b)}`},{dropdown:i((()=>[c(o,{style:v({color:l(w),background:l(C)})},{default:i((()=>[(t(!0),u(r,null,p(N,((e,a)=>(t(),d(s,{key:e,command:e},{default:i((()=>[m("span",{class:_({"is-choose":l(I)[a]})},g(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:i((()=>[S((t(),u("div",{class:"sort",onClick:j},G)),[[h]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-ebd2a4de"]]),q={class:"user-container"},H={class:"top-operation"},J=V(e({__name:"index",props:{pageName:null},emits:["openSelect"],setup(e,{emit:a}){const i=e,v=b(),{musicDownload:r,loveSongs:p,songRecord:d}=y(v),g=n((()=>{let e=s([]);return e="LoveView"==i.pageName?p.value:"RecentPlayView"==i.pageName?d.value:r.value,e})),_=o(1),f=o(N),h=n((()=>g.value.slice((_.value-1)*f.value,_.value*f.value).filter((e=>e.name.includes(x.value)||e.album.includes(x.value)||e.singer.includes(x.value))))),w=n((()=>g.value.length)),x=o(""),V=s([!1,!1,!1,!1]),j=o(!1),B=n((()=>"LoveView"==i.pageName?"清空全部收藏":"RecentPlayView"==i.pageName?"清空播放记录":"清空下载记录")),D=(e,a)=>{for(let l=0;l<V.length;l++)V[l]=e[l];a&&(j.value=a)},L=()=>{"LoveView"==i.pageName?p.value.splice(0):"RecentPlayView"==i.pageName?d.value.splice(0):r.value.splice(0),I(R.SUCCESS,"已清空全部下载记录！")};return(e,s)=>(t(),u("div",q,[m("div",H,[c(l(U),{songs:l(h)},null,8,["songs"]),c(l(k),{icon:"",name:l(B),onClick:L},null,8,["name"]),c(l(k),{icon:"",name:"批量操作",onClick:s[0]||(s[0]=e=>a("openSelect"))}),c(l(M),{modelValue:x.value,"onUpdate:modelValue":s[1]||(s[1]=e=>x.value=e)},null,8,["modelValue"]),c(l(O),{onGetSortChoice:D})]),c(l(z),{songs:l(h),sort:V,"page-size":f.value,"is-cancel-sort":j.value},null,8,["songs","sort","page-size","is-cancel-sort"]),S(c(l(P),{"cur-page":_.value,"onUpdate:curPage":s[2]||(s[2]=e=>_.value=e),"page-size":f.value,total:l(w)},null,8,["cur-page","page-size","total"]),[[C,f.value<l(w)]])]))}}),[["__scopeId","data-v-9f73e15b"]]),T={class:"batch-container"},Z={class:"operation-select"},$=V(e({__name:"index",props:{pageName:null,showSelect:{type:Boolean}},emits:["update:showSelect"],setup(e,{expose:s,emit:i}){const v=e;a((e=>({"0b91c96a":l(r)})));const{themeColor:r}=x(),p=b(),{songRecord:d,musicDownload:g,loveSongs:_,songRecordId:S,musicDownloadId:f,loveMusicId:h}=y(p),w=o(),C=n((()=>"LoveView"==v.pageName?_.value:"RecentPlayView"==v.pageName?d.value:g.value)),V=n((()=>{var e;return(null==(e=w.value)?void 0:e.getSelectItems())||[]})),{playSelectMusic:N}=j(),P=()=>{var e;i("update:showSelect",!1),null==(e=w.value)||e.closeSelectBox()},U=()=>{var e;N(V.value),null==(e=w.value)||e.clearSelect()},B=()=>{var e;V.value.forEach((e=>{p.addMuiscDownload(e)})),null==(e=w.value)||e.clearSelect()},D=()=>{V.value.length>0?(V.value.forEach((e=>{"LoveView"==v.pageName?_.value.splice(h.value.get(e.id),1):"RecentPlayView"==v.pageName?d.value.splice(S.value.get(e.id),1):g.value.splice(f.value.get(e.id),1)})),I(R.SUCCESS,"已清除选中的歌曲！")):I(R.INFO,"请先选择歌曲！")};return s({openSelectBox:()=>{var e;i("update:showSelect",!0),null==(e=w.value)||e.openSelectBox()},closeSelectBox:P}),(e,a)=>(t(),u("div",T,[m("div",Z,[c(l(k),{icon:"",name:"播放",class:"play",onClick:U}),c(l(k),{icon:"",onClick:D,name:"删除"}),c(l(k),{icon:"󰌄",onClick:B,name:"下载"}),c(l(k),{icon:"",name:"取消操作",onClick:P})]),c(l(z),{songs:l(C),"show-header":!1,ref_key:"table",ref:w},null,8,["songs"])]))}}),[["__scopeId","data-v-f0a13ca2"]]);export{$ as U,J as a};
