import{G as e,ax as a,u as l,Z as s,d as o,i as n,o as u,c as t,U as c,O as i,J as v,F as r,a7 as p,M as d,a as m,T as g,I as _,P as S,aq as f,ay as h,az as w,V as C}from"../@vue/@vue.7ad02ad1.js";import{s as x}from"../pinia/pinia.07d51cb2.js";import{u as y,_ as b,h as P,Z as V,C as N,P as k,m as z,M as I,a as R}from"../../static/index-b302a22d.js";import{P as j,_ as M}from"../index.vue_vue_type_style_index_0_scoped_b3813f91_lang/index.vue_vue_type_style_index_0_scoped_b3813f91_lang.b69fb170.js";import{b as U,c as B,d as D}from"../element-plus/element-plus.79622da4.js";import{S as L}from"./index.ceebb23a.js";const E=e=>(h("data-v-ebd2a4de"),e=e(),w(),e),F={class:"sort-btn"},G=[E((()=>m("span",{class:"iconfont"},"",-1))),E((()=>m("span",null," 排序",-1)))],O=b(e({__name:"index",emits:["getSortChoice"],setup(e,{emit:h}){a((e=>({"40b0d3c2":l(w),"5f9e34b4":l(b),fc57a2a2:l(x)})));const{fontColor:w,background:C,themeColor:x,searchColor:b,dropDownMode:P}=y(),V=s(["歌曲排序","歌手排序","专辑排序","时长排序"]),N=s([!1,!1,!1,!1]),k=o(-1),z=n((()=>N.map(((e,a)=>a==k.value)))),I=e=>{"歌曲排序"==e?k.value=z.value[0]?-1:0:"歌手排序"==e?k.value=z.value[1]?-1:1:"专辑排序"==e?k.value=z.value[2]?-1:2:"时长排序"==e&&(k.value=z.value[3]?-1:3),-1==k.value?h("getSortChoice",z.value,!0):h("getSortChoice",z.value,!1)},R=()=>{-1==k.value&&(k.value=0,h("getSortChoice",z.value,!1))};return(e,a)=>{const s=U,o=B,n=D,h=f("prevent");return u(),t("div",F,[c(n,{trigger:"click",onCommand:I,"popper-class":`dropdown sort-drop ${l(P)}`},{dropdown:i((()=>[c(o,{style:v({color:l(w),background:l(C)})},{default:i((()=>[(u(!0),t(r,null,p(V,((e,a)=>(u(),d(s,{key:e,command:e},{default:i((()=>[m("span",{class:_({"is-choose":l(z)[a]})},g(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:i((()=>[S((u(),t("div",{class:"sort",onClick:R},G)),[[h]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-ebd2a4de"]]),Z={class:"user-container"},q={class:"top-operation"},H=b(e({__name:"index",props:{pageName:null},emits:["openSelect"],setup(e,{expose:a,emit:i}){const v=e,r=P(),{musicDownload:p,loveSongs:d,songRecord:g}=x(r),_=n((()=>{let e=s([]);return e="LoveView"==v.pageName?d.value:"RecentPlayView"==v.pageName?g.value:p.value,e})),f=o(1),h=o(V),w=n((()=>_.value.slice((f.value-1)*h.value,f.value*h.value).filter((e=>e.name.includes(b.value)||e.album.includes(b.value)||e.singer.includes(b.value))))),y=n((()=>_.value.length)),b=o(""),R=s([!1,!1,!1,!1]),U=o(!1),B=n((()=>"LoveView"==v.pageName?"清空全部收藏":"RecentPlayView"==v.pageName?"清空播放记录":"清空下载记录")),D=(e,a)=>{for(let l=0;l<R.length;l++)R[l]=e[l];a&&(U.value=a)},E=()=>{"LoveView"==v.pageName?d.value.splice(0):"RecentPlayView"==v.pageName?g.value.splice(0):p.value.splice(0),z(I.SUCCESS,"已清空全部下载记录！")};return a({getPage:()=>f.value,getPageSize:()=>h.value}),(e,a)=>(u(),t("div",Z,[m("div",q,[c(l(j),{songs:l(w)},null,8,["songs"]),c(l(N),{icon:"",name:l(B),onClick:E},null,8,["name"]),c(l(N),{icon:"",name:"批量操作",onClick:a[0]||(a[0]=e=>i("openSelect"))}),c(l(L),{modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value=e)},null,8,["modelValue"]),c(l(O),{onGetSortChoice:D})]),c(l(M),{songs:l(w),sort:R,"page-size":h.value,"is-cancel-sort":U.value},null,8,["songs","sort","page-size","is-cancel-sort"]),S(c(l(k),{"cur-page":f.value,"onUpdate:curPage":a[2]||(a[2]=e=>f.value=e),"page-size":h.value,total:l(y)},null,8,["cur-page","page-size","total"]),[[C,h.value<l(y)]])]))}}),[["__scopeId","data-v-8b843896"]]),J={class:"batch-container"},T={class:"operation-select"},$=b(e({__name:"index",props:{pageName:null,showSelect:{type:Boolean},curPage:null,pageSize:null},emits:["update:showSelect"],setup(e,{expose:s,emit:i}){const v=e;a((e=>({"8719a3f6":l(r)})));const{themeColor:r}=y(),p=P(),{songRecord:d,musicDownload:g,loveSongs:_,songRecordId:S,musicDownloadId:f,loveMusicId:h}=x(p),w=o(),C=n((()=>"LoveView"==v.pageName?_.value:"RecentPlayView"==v.pageName?d.value:g.value)),b=n((()=>C.value.slice((v.curPage-1)*v.pageSize,v.curPage*v.pageSize))),V=n((()=>{var e;return(null==(e=w.value)?void 0:e.getSelectItems())||[]})),{playSelectMusic:k}=R(),j=()=>{var e;i("update:showSelect",!1),null==(e=w.value)||e.closeSelectBox()},U=()=>{var e;k(V.value),null==(e=w.value)||e.clearSelect()},B=()=>{var e;V.value.forEach((e=>{p.addMuiscDownload(e)})),null==(e=w.value)||e.clearSelect()},D=()=>{V.value.length>0?(V.value.forEach((e=>{"LoveView"==v.pageName?_.value.splice(h.value.get(e.id),1):"RecentPlayView"==v.pageName?d.value.splice(S.value.get(e.id),1):g.value.splice(f.value.get(e.id),1)})),z(I.SUCCESS,"已清除选中的歌曲！")):z(I.INFO,"请先选择歌曲！")};return s({openSelectBox:()=>{var e;i("update:showSelect",!0),null==(e=w.value)||e.openSelectBox()},closeSelectBox:j}),(e,a)=>(u(),t("div",J,[m("div",T,[c(l(N),{icon:"",name:"播放",class:"play",onClick:U}),c(l(N),{icon:"",onClick:D,name:"删除"}),c(l(N),{icon:"󰌄",onClick:B,name:"下载"}),c(l(N),{icon:"",name:"取消操作",onClick:j})]),c(l(M),{songs:l(b),"show-header":!1,ref_key:"table",ref:w},null,8,["songs"])]))}}),[["__scopeId","data-v-b3813f91"]]);export{$ as U,H as a};
