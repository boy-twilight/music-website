import{G as e,ax as a,u as s,i as l,Z as o,r as n,o as t,c as i,U as u,O as c,J as r,F as p,a7 as v,M as d,a as g,T as m,I as _,P as f,aq as h,ay as C,az as S,V as w,z as y,n as b}from"../@vue/@vue.59fec093.js";import{s as k}from"../pinia/pinia.81428a33.js";import{t as N,g as x,_ as P,a as V,C as I,P as j,e as z,d as L,u as M}from"../../assets/index-41f64cc1.js";import{P as R,_ as E}from"../index.vue_vue_type_style_index_0_scoped_2dc764e5_lang/index.vue_vue_type_style_index_0_scoped_2dc764e5_lang.3ccf6b70.js";import{b as U,c as F,d as G}from"../element-plus/element-plus.85c7c360.js";import{S as D}from"./index.4e3db202.js";const O=e=>(C("data-v-2b1a5ea0"),e=e(),S(),e),T={class:"sort-btn"},q=[O((()=>g("span",{class:"iconfont"},"",-1))),O((()=>g("span",null," 排序",-1)))],B=P(e({__name:"index",emits:["getSortChoice"],setup(e,{emit:C}){a((e=>({f1298b02:s(w),d4c61bf4:s(k),"5af5d362":s(b)})));const S=N(),w=x().get("fontColor"),y=x().get("background"),b=x().get("themeColor"),k=l((()=>{var e;return"color"==S.bgMode?null==(e=x().get("searchBg"))?void 0:e.value:"rgba(210,210,210,0.2)"})),P=l((()=>"color"==S.bgMode?"#ffffff"==w.value?"dropdown-dark":"dropdown-light":"dropdown-skin")),V=o(["歌曲排序","歌手排序","专辑排序","时长排序"]),I=o([!1,!1,!1,!1]),j=n(-1),z=l((()=>I.map(((e,a)=>a==j.value)))),L=e=>{"歌曲排序"==e?j.value=z.value[0]?-1:0:"歌手排序"==e?j.value=z.value[1]?-1:1:"专辑排序"==e?j.value=z.value[2]?-1:2:"时长排序"==e&&(j.value=z.value[3]?-1:3),-1==j.value?C("getSortChoice",z.value,!0):C("getSortChoice",z.value,!1)},M=()=>{-1==j.value&&(j.value=0,C("getSortChoice",z.value,!1))};return(e,a)=>{const l=U,o=F,n=G,C=h("prevent");return t(),i("div",T,[u(n,{trigger:"click",onCommand:L,"popper-class":`dropdown sort-drop ${s(P)}`},{dropdown:c((()=>[u(o,{style:r({color:s(w),background:s(y)})},{default:c((()=>[(t(!0),i(p,null,v(V,((e,a)=>(t(),d(l,{key:e,command:e},{default:c((()=>[g("span",{class:_({"is-choose":s(z)[a]})},m(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:c((()=>[f((t(),i("div",{class:"sort",onClick:M},q)),[[C]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-2b1a5ea0"]]),J={class:"user-container"},Z={class:"top-operation"},$=P(e({__name:"index",props:{pageName:null},emits:["openSelect"],setup(e,{emit:a}){const c=e,r=V(),{musicDownload:p,loveSongs:v,songRecord:d}=k(r),m=l((()=>{let e=o([]);return e="LoveView"==c.pageName?v.value:"RecentPlayView"==c.pageName?d.value:p.value,e})),_=l((()=>new Map(m.value.map(((e,a)=>[e.id,a]))))),h=n(1),C=n(40),S=l((()=>m.value.slice((h.value-1)*C.value,h.value*C.value).filter((e=>e.name.includes(x.value)||e.album.includes(x.value)||e.singer.includes(x.value))))),y=l((()=>m.value.length)),b=e=>{h.value=e},N=l((()=>"LoveView"==c.pageName?"清空全部收藏":"RecentPlayView"==c.pageName?"清空播放记录":"清空下载记录")),x=n(""),P=e=>{x.value=e},M=o([!1,!1,!1,!1]),U=n(!1),F=(e,a)=>{for(let s=0;s<M.length;s++)M[s]=e[s];a&&(U.value=a)},G=()=>{"LoveView"==c.pageName?v.value.splice(0):"RecentPlayView"==c.pageName?d.value.splice(0):p.value.splice(0),z(L.SUCCESS,"已清空全部下载记录！")};return(e,l)=>(t(),i("div",J,[g("div",Z,[u(s(R),{songs:s(S)},null,8,["songs"]),u(s(I),{icon:"",name:s(N),onClick:G},null,8,["name"]),u(s(I),{icon:"",name:"批量操作",onClick:l[0]||(l[0]=e=>a("openSelect",!0))}),u(s(D),{onGetContent:P}),u(s(B),{onGetSortChoice:F})]),u(s(E),{songs:s(S),"song-id-mapper":s(_),sort:M,"page-size":C.value,"is-cancel-sort":U.value},null,8,["songs","song-id-mapper","sort","page-size","is-cancel-sort"]),f(u(s(j),{"cur-page":h.value,"page-size":C.value,total:s(y),onPageChange:b},null,8,["cur-page","page-size","total"]),[[w,C.value<s(y)]])]))}}),[["__scopeId","data-v-f7009bdf"]]),A={class:"batch-container"},H={class:"operation-select"},K=P(e({__name:"index",props:{pageName:null},emits:["closeSelect"],setup(e,{emit:n}){const c=e;a((e=>({"065e5764":s(r)})));const r=x().get("themeColor"),p=M(),{isPlay:v,songList:d,songListId:m,playProcess:_,playTime:f,current:h}=k(p),C=V(),{songRecord:S,musicDownload:w,loveSongs:N}=k(C),P=y("hideScroll"),j=l((()=>"LoveView"==c.pageName?N.value:"RecentPlayView"==c.pageName?S.value:w.value)),R=l((()=>new Map(j.value.map(((e,a)=>[e.id,a]))))),U=o([]),F=e=>{0!=U.length&&U.splice(0),U.push(...e)},G=async()=>{U.length>0?(v.value=!1,_.value=0,f.value=0,await b(),U.forEach((e=>{null==m.value.get(e.id)&&d.value.unshift(e)})),h.value=m.value.get(U[0].id),v.value=!0,z(L.SUCCESS,"已添加到播放列表！")):z(L.INFO,"请添加歌曲！")},D=()=>{U.forEach((e=>{C.addMuiscDownload(e)}))},O=()=>{if(U.length>0){const e=U.map((e=>e.id)),a=j.value.filter((a=>!e.includes(a.id)));j.value.splice(0),j.value.push(...a),z(L.SUCCESS,"已清除选中的歌曲！")}else z(L.INFO,"请添加歌曲！")},T=()=>{P(),n("closeSelect",!1)};return(e,a)=>(t(),i("div",A,[g("div",H,[u(s(I),{icon:"",name:"播放",class:"play",onClick:G}),u(s(I),{icon:"",onClick:O,name:"删除"}),u(s(I),{icon:"󰌄",onClick:D,name:"下载"}),u(s(I),{icon:"",name:"取消操作",onClick:T})]),u(s(E),{songs:s(j),"song-id-mapper":s(R),showSelect:!0,"show-header":!1,onGetSelectItems:F},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-2dc764e5"]]);export{K as U,$ as a};
