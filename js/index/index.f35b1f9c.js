import{G as e,ax as a,u as l,Z as s,d as o,i as n,o as t,c as u,U as c,O as i,J as v,F as r,a7 as p,M as d,a as m,T as g,I as _,P as S,aq as f,ay as h,az as C,V as w}from"../@vue/@vue.7ad02ad1.js";import{s as x}from"../pinia/pinia.07d51cb2.js";import{u as y,_ as k,i as V,a0 as N,C as b,P,m as j,h as I,a as R}from"../../static/index-493d9311.js";import{P as U,_ as z}from"../index.vue_vue_type_style_index_0_scoped_7e61a8d8_lang/index.vue_vue_type_style_index_0_scoped_7e61a8d8_lang.7c6e6e36.js";import{b as B,c as D,d as L}from"../element-plus/element-plus.79622da4.js";import{S as M}from"./index.34d5eee0.js";const E=e=>(h("data-v-93e9715f"),e=e(),C(),e),F={class:"sort-btn"},G=[E((()=>m("span",{class:"iconfont"},"",-1))),E((()=>m("span",null," 排序",-1)))],O=k(e({__name:"index",emits:["getSortChoice"],setup(e,{emit:h}){a((e=>({f55b83f6:l(C),"945da7e8":l(k),dd02f8ee:l(x)})));const{fontColor:C,background:w,themeColor:x,searchColor:k,dropDownMode:V}=y(),N=s(["歌曲排序","歌手排序","专辑排序","时长排序"]),b=s([!1,!1,!1,!1]),P=o(-1),j=n((()=>b.map(((e,a)=>a==P.value)))),I=e=>{"歌曲排序"==e?P.value=j.value[0]?-1:0:"歌手排序"==e?P.value=j.value[1]?-1:1:"专辑排序"==e?P.value=j.value[2]?-1:2:"时长排序"==e&&(P.value=j.value[3]?-1:3),-1==P.value?h("getSortChoice",j.value,!0):h("getSortChoice",j.value,!1)},R=()=>{-1==P.value&&(P.value=0,h("getSortChoice",j.value,!1))};return(e,a)=>{const s=B,o=D,n=L,h=f("prevent");return t(),u("div",F,[c(n,{trigger:"click",onCommand:I,"popper-class":`dropdown sort-drop ${l(V)}`},{dropdown:i((()=>[c(o,{style:v({color:l(C),background:l(w)})},{default:i((()=>[(t(!0),u(r,null,p(N,((e,a)=>(t(),d(s,{key:e,command:e},{default:i((()=>[m("span",{class:_({"is-choose":l(j)[a]})},g(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:i((()=>[S((t(),u("div",{class:"sort",onClick:R},G)),[[h]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-93e9715f"]]),q={class:"user-container"},H={class:"top-operation"},J=k(e({__name:"index",props:{pageName:null},emits:["openSelect"],setup(e,{emit:a}){const i=e,v=V(),{musicDownload:r,loveSongs:p,songRecord:d}=x(v),g=n((()=>{let e=s([]);return e="LoveView"==i.pageName?p.value:"RecentPlayView"==i.pageName?d.value:r.value,e})),_=o(1),f=o(N),h=n((()=>g.value.slice((_.value-1)*f.value,_.value*f.value).filter((e=>e.name.includes(k.value)||e.album.includes(k.value)||e.singer.includes(k.value))))),C=n((()=>g.value.length)),y=n((()=>"LoveView"==i.pageName?"清空全部收藏":"RecentPlayView"==i.pageName?"清空播放记录":"清空下载记录")),k=o(""),R=s([!1,!1,!1,!1]),B=o(!1),D=(e,a)=>{for(let l=0;l<R.length;l++)R[l]=e[l];a&&(B.value=a)},L=()=>{"LoveView"==i.pageName?p.value.splice(0):"RecentPlayView"==i.pageName?d.value.splice(0):r.value.splice(0),j(I.SUCCESS,"已清空全部下载记录！")};return(e,s)=>(t(),u("div",q,[m("div",H,[c(l(U),{songs:l(h)},null,8,["songs"]),c(l(b),{icon:"",name:l(y),onClick:L},null,8,["name"]),c(l(b),{icon:"",name:"批量操作",onClick:s[0]||(s[0]=e=>a("openSelect"))}),c(l(M),{modelValue:k.value,"onUpdate:modelValue":s[1]||(s[1]=e=>k.value=e)},null,8,["modelValue"]),c(l(O),{onGetSortChoice:D})]),c(l(z),{songs:l(h),sort:R,"page-size":f.value,"is-cancel-sort":B.value},null,8,["songs","sort","page-size","is-cancel-sort"]),S(c(l(P),{"cur-page":_.value,"onUpdate:curPage":s[2]||(s[2]=e=>_.value=e),"page-size":f.value,total:l(C)},null,8,["cur-page","page-size","total"]),[[w,f.value<l(C)]])]))}}),[["__scopeId","data-v-81b3a6cf"]]),T={class:"batch-container"},Z={class:"operation-select"},$=k(e({__name:"index",props:{pageName:null,showSelect:{type:Boolean}},emits:["update:showSelect"],setup(e,{expose:s,emit:i}){const v=e;a((e=>({"653ae638":l(r)})));const{themeColor:r}=y(),p=V(),{songRecord:d,musicDownload:g,loveSongs:_}=x(p),S=o(),f=n((()=>"LoveView"==v.pageName?_.value:"RecentPlayView"==v.pageName?d.value:g.value)),h=n((()=>{var e;return(null==(e=S.value)?void 0:e.getSelectItems())||[]})),{playSelectMusic:C}=R(),w=()=>{var e;i("update:showSelect",!1),null==(e=S.value)||e.closeSelectBox()},k=()=>{var e;C(h.value),null==(e=S.value)||e.clearSelect()},N=()=>{var e;h.value.forEach((e=>{p.addMuiscDownload(e)})),null==(e=S.value)||e.clearSelect()},P=()=>{if(h.value.length>0){const e=h.value.map((e=>e.id)),a=f.value.filter((a=>!e.includes(a.id)));f.value.splice(0),f.value.push(...a),j(I.SUCCESS,"已清除选中的歌曲！")}else j(I.INFO,"请添加歌曲！")};return s({openSelectBox:()=>{var e;i("update:showSelect",!0),null==(e=S.value)||e.openSelectBox()},closeSelectBox:w}),(e,a)=>(t(),u("div",T,[m("div",Z,[c(l(b),{icon:"",name:"播放",class:"play",onClick:k}),c(l(b),{icon:"",onClick:P,name:"删除"}),c(l(b),{icon:"󰌄",onClick:N,name:"下载"}),c(l(b),{icon:"",name:"取消操作",onClick:w})]),c(l(z),{songs:l(f),"show-header":!1,ref_key:"table",ref:S},null,8,["songs"])]))}}),[["__scopeId","data-v-7e61a8d8"]]);export{$ as U,J as a};
