import{G as e,ax as a,u as l,Z as s,d as o,i as n,o as u,c,U as t,O as i,J as p,F as r,a7 as v,M as d,a as m,T as g,I as _,P as f,aq as C,ay as S,az as h,V as w}from"../@vue/@vue.7ad02ad1.js";import{s as y}from"../pinia/pinia.07d51cb2.js";import{u as b,_ as k,j as V,C as x,P as N,m as P,i as j,a as I}from"../../static/index-5203d642.js";import{P as M,_ as R}from"../index.vue_vue_type_style_index_0_scoped_c70cb44b_lang/index.vue_vue_type_style_index_0_scoped_c70cb44b_lang.40b36b17.js";import{b as z,c as U,d as D}from"../element-plus/element-plus.93eaa55f.js";import{S as L}from"./index.40d91209.js";const E=e=>(S("data-v-93e9715f"),e=e(),h(),e),F={class:"sort-btn"},G=[E((()=>m("span",{class:"iconfont"},"",-1))),E((()=>m("span",null," 排序",-1)))],O=k(e({__name:"index",emits:["getSortChoice"],setup(e,{emit:S}){a((e=>({f55b83f6:l(h),"945da7e8":l(k),dd02f8ee:l(y)})));const{fontColor:h,background:w,themeColor:y,searchColor:k,dropDownMode:V}=b(),x=s(["歌曲排序","歌手排序","专辑排序","时长排序"]),N=s([!1,!1,!1,!1]),P=o(-1),j=n((()=>N.map(((e,a)=>a==P.value)))),I=e=>{"歌曲排序"==e?P.value=j.value[0]?-1:0:"歌手排序"==e?P.value=j.value[1]?-1:1:"专辑排序"==e?P.value=j.value[2]?-1:2:"时长排序"==e&&(P.value=j.value[3]?-1:3),-1==P.value?S("getSortChoice",j.value,!0):S("getSortChoice",j.value,!1)},M=()=>{-1==P.value&&(P.value=0,S("getSortChoice",j.value,!1))};return(e,a)=>{const s=z,o=U,n=D,S=C("prevent");return u(),c("div",F,[t(n,{trigger:"click",onCommand:I,"popper-class":`dropdown sort-drop ${l(V)}`},{dropdown:i((()=>[t(o,{style:p({color:l(h),background:l(w)})},{default:i((()=>[(u(!0),c(r,null,v(x,((e,a)=>(u(),d(s,{key:e,command:e},{default:i((()=>[m("span",{class:_({"is-choose":l(j)[a]})},g(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:i((()=>[f((u(),c("div",{class:"sort",onClick:M},G)),[[S]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-93e9715f"]]),q={class:"user-container"},H={class:"top-operation"},J=k(e({__name:"index",props:{pageName:null},emits:["openSelect"],setup(e,{emit:a}){const i=e,p=V(),{musicDownload:r,loveSongs:v,songRecord:d}=y(p),g=n((()=>{let e=s([]);return e="LoveView"==i.pageName?v.value:"RecentPlayView"==i.pageName?d.value:r.value,e})),_=n((()=>new Map(g.value.map(((e,a)=>[e.id,a]))))),C=o(1),S=o(60),h=n((()=>g.value.slice((C.value-1)*S.value,C.value*S.value).filter((e=>e.name.includes(z.value)||e.album.includes(z.value)||e.singer.includes(z.value))))),b=n((()=>g.value.length)),k=e=>{C.value=e},I=n((()=>"LoveView"==i.pageName?"清空全部收藏":"RecentPlayView"==i.pageName?"清空播放记录":"清空下载记录")),z=o(""),U=s([!1,!1,!1,!1]),D=o(!1),E=(e,a)=>{for(let l=0;l<U.length;l++)U[l]=e[l];a&&(D.value=a)},F=()=>{"LoveView"==i.pageName?v.value.splice(0):"RecentPlayView"==i.pageName?d.value.splice(0):r.value.splice(0),P(j.SUCCESS,"已清空全部下载记录！")};return(e,s)=>(u(),c("div",q,[m("div",H,[t(l(M),{songs:l(h)},null,8,["songs"]),t(l(x),{icon:"",name:l(I),onClick:F},null,8,["name"]),t(l(x),{icon:"",name:"批量操作",onClick:s[0]||(s[0]=e=>a("openSelect",!0))}),t(l(L),{modelValue:z.value,"onUpdate:modelValue":s[1]||(s[1]=e=>z.value=e)},null,8,["modelValue"]),t(l(O),{onGetSortChoice:E})]),t(l(R),{songs:l(h),"song-id-mapper":l(_),sort:U,"page-size":S.value,"is-cancel-sort":D.value},null,8,["songs","song-id-mapper","sort","page-size","is-cancel-sort"]),f(t(l(N),{"cur-page":C.value,"page-size":S.value,total:l(b),onPageChange:k},null,8,["cur-page","page-size","total"]),[[w,S.value<l(b)]])]))}}),[["__scopeId","data-v-e7cfc7e0"]]),T={class:"batch-container"},Z={class:"operation-select"},$=k(e({__name:"index",props:{pageName:null},emits:["closeSelect"],setup(e,{emit:s}){const i=e;a((e=>({"7f6714f7":l(p)})));const{themeColor:p}=b(),r=V(),{songRecord:v,musicDownload:d,loveSongs:g}=y(r),_=o(),f=n((()=>"LoveView"==i.pageName?g.value:"RecentPlayView"==i.pageName?v.value:d.value)),C=n((()=>new Map(f.value.map(((e,a)=>[e.id,a]))))),S=n((()=>{var e;return(null==(e=_.value)?void 0:e.getSelectItems())||[]})),{playSelectMusic:h}=I(),w=()=>{var e;h(S.value),null==(e=_.value)||e.clearSelect()},k=()=>{var e;S.value.forEach((e=>{r.addMuiscDownload(e)})),null==(e=_.value)||e.clearSelect()},N=()=>{if(S.value.length>0){const e=S.value.map((e=>e.id)),a=f.value.filter((a=>!e.includes(a.id)));f.value.splice(0),f.value.push(...a),P(j.SUCCESS,"已清除选中的歌曲！")}else P(j.INFO,"请添加歌曲！")},M=()=>{s("closeSelect",!1)};return(e,a)=>(u(),c("div",T,[m("div",Z,[t(l(x),{icon:"",name:"播放",class:"play",onClick:w}),t(l(x),{icon:"",onClick:N,name:"删除"}),t(l(x),{icon:"󰌄",onClick:k,name:"下载"}),t(l(x),{icon:"",name:"取消操作",onClick:M})]),t(l(R),{songs:l(f),"song-id-mapper":l(C),showSelect:!0,"show-header":!1,ref_key:"table",ref:_},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-c70cb44b"]]);export{$ as U,J as a};
