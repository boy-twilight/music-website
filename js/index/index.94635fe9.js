import{G as e,ax as a,u as l,Z as s,d as o,i as n,o as t,c,U as u,O as i,J as r,F as p,a7 as v,M as d,a as m,T as g,I as _,P as f,aq as C,ay as S,az as h,V as w,z as y}from"../@vue/@vue.7ad02ad1.js";import{s as k}from"../pinia/pinia.07d51cb2.js";import{u as x,_ as N,j as b,C as P,P as V,m as j,i as z,a as I}from"../../static/index-c54fb4ae.js";import{P as M,_ as R}from"../index.vue_vue_type_style_index_0_scoped_841f6d57_lang/index.vue_vue_type_style_index_0_scoped_841f6d57_lang.e971174d.js";import{b as D,c as L,d as U}from"../element-plus/element-plus.70abbed3.js";import{S as E}from"./index.6e0300dc.js";const G=e=>(S("data-v-93e9715f"),e=e(),h(),e),F={class:"sort-btn"},O=[G((()=>m("span",{class:"iconfont"},"",-1))),G((()=>m("span",null," 排序",-1)))],q=N(e({__name:"index",emits:["getSortChoice"],setup(e,{emit:S}){a((e=>({f55b83f6:l(h),"945da7e8":l(k),dd02f8ee:l(y)})));const{fontColor:h,background:w,themeColor:y,searchColor:k,dropDownMode:N}=x(),b=s(["歌曲排序","歌手排序","专辑排序","时长排序"]),P=s([!1,!1,!1,!1]),V=o(-1),j=n((()=>P.map(((e,a)=>a==V.value)))),z=e=>{"歌曲排序"==e?V.value=j.value[0]?-1:0:"歌手排序"==e?V.value=j.value[1]?-1:1:"专辑排序"==e?V.value=j.value[2]?-1:2:"时长排序"==e&&(V.value=j.value[3]?-1:3),-1==V.value?S("getSortChoice",j.value,!0):S("getSortChoice",j.value,!1)},I=()=>{-1==V.value&&(V.value=0,S("getSortChoice",j.value,!1))};return(e,a)=>{const s=D,o=L,n=U,S=C("prevent");return t(),c("div",F,[u(n,{trigger:"click",onCommand:z,"popper-class":`dropdown sort-drop ${l(N)}`},{dropdown:i((()=>[u(o,{style:r({color:l(h),background:l(w)})},{default:i((()=>[(t(!0),c(p,null,v(b,((e,a)=>(t(),d(s,{key:e,command:e},{default:i((()=>[m("span",{class:_({"is-choose":l(j)[a]})},g(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:i((()=>[f((t(),c("div",{class:"sort",onClick:I},O)),[[S]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-93e9715f"]]),H={class:"user-container"},J={class:"top-operation"},T=N(e({__name:"index",props:{pageName:null},emits:["openSelect"],setup(e,{emit:a}){const i=e,r=b(),{musicDownload:p,loveSongs:v,songRecord:d}=k(r),g=n((()=>{let e=s([]);return e="LoveView"==i.pageName?v.value:"RecentPlayView"==i.pageName?d.value:p.value,e})),_=n((()=>new Map(g.value.map(((e,a)=>[e.id,a]))))),C=o(1),S=o(40),h=n((()=>g.value.slice((C.value-1)*S.value,C.value*S.value).filter((e=>e.name.includes(I.value)||e.album.includes(I.value)||e.singer.includes(I.value))))),y=n((()=>g.value.length)),x=e=>{C.value=e},N=n((()=>"LoveView"==i.pageName?"清空全部收藏":"RecentPlayView"==i.pageName?"清空播放记录":"清空下载记录")),I=o(""),D=e=>{I.value=e},L=s([!1,!1,!1,!1]),U=o(!1),G=(e,a)=>{for(let l=0;l<L.length;l++)L[l]=e[l];a&&(U.value=a)},F=()=>{"LoveView"==i.pageName?v.value.splice(0):"RecentPlayView"==i.pageName?d.value.splice(0):p.value.splice(0),j(z.SUCCESS,"已清空全部下载记录！")};return(e,s)=>(t(),c("div",H,[m("div",J,[u(l(M),{songs:l(h)},null,8,["songs"]),u(l(P),{icon:"",name:l(N),onClick:F},null,8,["name"]),u(l(P),{icon:"",name:"批量操作",onClick:s[0]||(s[0]=e=>a("openSelect",!0))}),u(l(E),{onGetContent:D}),u(l(q),{onGetSortChoice:G})]),u(l(R),{songs:l(h),"song-id-mapper":l(_),sort:L,"page-size":S.value,"is-cancel-sort":U.value},null,8,["songs","song-id-mapper","sort","page-size","is-cancel-sort"]),f(u(l(V),{"cur-page":C.value,"page-size":S.value,total:l(y),onPageChange:x},null,8,["cur-page","page-size","total"]),[[w,S.value<l(y)]])]))}}),[["__scopeId","data-v-751219cf"]]),Z={class:"batch-container"},$={class:"operation-select"},A=N(e({__name:"index",props:{pageName:null},emits:["closeSelect"],setup(e,{emit:s}){const i=e;a((e=>({"63c6cc31":l(r)})));const{themeColor:r}=x(),p=y("hideScrollbar"),v=b(),{songRecord:d,musicDownload:g,loveSongs:_}=k(v),f=o(),C=n((()=>"LoveView"==i.pageName?_.value:"RecentPlayView"==i.pageName?d.value:g.value)),S=n((()=>new Map(C.value.map(((e,a)=>[e.id,a]))))),h=n((()=>{var e;return(null==(e=f.value)?void 0:e.getSelectItems())||[]})),{playSelectMusic:w}=I(),N=()=>{var e;w(h.value),null==(e=f.value)||e.clearSelect()},V=()=>{var e;h.value.forEach((e=>{v.addMuiscDownload(e)})),null==(e=f.value)||e.clearSelect()},M=()=>{if(h.value.length>0){const e=h.value.map((e=>e.id)),a=C.value.filter((a=>!e.includes(a.id)));C.value.splice(0),C.value.push(...a),j(z.SUCCESS,"已清除选中的歌曲！")}else j(z.INFO,"请添加歌曲！")},D=()=>{p(),s("closeSelect",!1)};return(e,a)=>(t(),c("div",Z,[m("div",$,[u(l(P),{icon:"",name:"播放",class:"play",onClick:N}),u(l(P),{icon:"",onClick:M,name:"删除"}),u(l(P),{icon:"󰌄",onClick:V,name:"下载"}),u(l(P),{icon:"",name:"取消操作",onClick:D})]),u(l(R),{songs:l(C),"song-id-mapper":l(S),showSelect:!0,"show-header":!1,ref_key:"table",ref:f},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-841f6d57"]]);export{A as U,T as a};
